!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.zChat=t():e.zChat=t()}(window,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="../../bin/",t(t.s=50)}([function(e,t,n){function i(e,t){var n={},i={},o=function(t){return!e.nodeType&&e!=window&&e!=document||("FORM"!=e.tagName||"submit"!=t)&&!a.isCustomEvents&&(a.isFF&&a.isFF<9?!document.createEvent("event")[t.toUpperCase()]:void 0===e["on"+t])},r=function(t){t in i||(i[t]=function(i){i&&(i.stopPropagation||u(i));var o,r=n[t],s=r.length,l=!0;for(r._active=!0,o=0;o<s;o++)try{if(!r[o])continue;!1===r[o].call(e,a.isCustomEvents&&i instanceof a.CustomEvent?i.detail:i)&&(l=!1)}catch(e){c.fire("error",e)}if(r._active=!1,r._dirty){for(o=0;o<s;o++)r[o]||(o==s-1?r.pop():r[o--]=r.pop(),s--);r._dirty=!1}if(!1===l)return i&&(i.preventDefault(),i.returnValue=!1),!1},e.attachEvent?e.attachEvent("on"+t,i[t]):e.addEventListener&&e.addEventListener(t,i[t],!1))},s=function(t){var o=i[t];o&&(e.attachEvent?e.detachEvent("on"+t,o):e.addEventListener&&e.removeEventListener(t,o,!1),delete i[t],delete n[t])},u=function(e){e.preventDefault=u.preventDefault,e.stopPropagation=u.stopPropagation,e.target=e.srcElement};u.preventDefault=function(){this.returnValue=!1},u.stopPropagation=function(){this.cancelBubble=!0};var l={fire:function(t,i){if(!a.isCustomEvents||o(t)){var r=n[t],s=!0;if(r&&r.length){var u,l;for(r._active=!0,u=0,l=r.length;u<l;u++)try{if(!r[u])continue;!1===r[u].call(e,i)&&(s=!1)}catch(e){c.fire("error",e)}if(r._active=!1,r._dirty){for(u=0;u<l;u++)r[u]||(u==l-1?r.pop():r[u--]=r.pop(),l--);r._dirty=!1}}return s}return e.dispatchEvent(new a.CustomEvent(t,{bubbles:!1,cancelable:!0,detail:i}))},on:function(t,i){if(!t&&"function"!=typeof i)throw"bad arguments to on / addEventListener";return t in n||(n[t]=[],o(t)||r(t)),n[t].push(i),e},un:function(t,o){var r=n[t];if(r){for(var a=0,c=r.length;a<c;a++)if(r[a]===o){1==r.length?i[t]?s(t):delete n[t]:r._active?(r[a]=null,r._dirty=!0):a==c-1?r.pop():r[a]=r.pop();break}return e}},unextendEvents:function(){if(n&&i){for(var e in i)i.hasOwnProperty(e)&&s(e);n=i=null}}};if(t)return l;for(var d in l)l.hasOwnProperty(d)&&(e[d]=l[d]);return a.bugs.leaksMemory&&a.bugs.leaksMemory(function(){for(var t in l)l.hasOwnProperty(t)&&(e[t]=null)}),e}function o(e,t){e<=u?t():l[e].push(t)}function r(e){for(;u<e;){u++;for(var t=0;t<l[u].length;t++)l[u][t]();l[u]=null}}function s(){r(2)}var a=n(2),c={extend:i,body:i(document.body,!0),window:i(window,!0),document:i(document,!0),runAfterScriptReady:function(e){o(0,e)},runAfterFirstChildReady:function(e){o(1,e)},runAfterDomReady:function(e){o(2,e)}};c.extend(c);var u=0,l=[[],[],[],[]];!function e(){u>0||(document.body&&document.body.firstChild?r(1):window.setTimeout(e,200))}(),function(){var e;if(a.isSafari)e=window.setInterval(function(){/loaded|complete/i.test(document.readyState)&&(window.clearInterval(e),s())},20);else if(document.addEventListener)/loaded|complete/i.test(document.readyState)?s():document.addEventListener("DOMContentLoaded",s,!1);else if(a.isIE){window.attachEvent("onload",s);var t=document.createElement("document:ready");e=window.setInterval(function(){if(/loaded|complete/i.test(document.readyState))t=null,window.clearInterval(e),s();else{try{t.doScroll("left")}catch(e){return}t=null,window.clearInterval(e),s()}},200)}}(),e.exports=c},function(e,t){var n=function(e,t){return t?null==e:void 0===e};e.exports=n},function(e,t,n){function i(){var e,t,n=navigator,i=n.userAgent.toLowerCase(),s=+(/trident.*rv:? *([0-9]+)/.exec(i)||[])[1]||!1,a=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:document.documentMode}(),c=8===a,u=7===a,l=6===a,d=!!window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera),h=i.indexOf("edge")>-1,f="Google Inc."===n.vendor,p="Apple Computer, Inc."===n.vendor,m=!h&&!a&&!d&&(f||p||/webkit|khtml/.test(i)),g=+/\d+/.exec(/firefox\/\d+/i.exec(n.userAgent)||""),_=-1!==i.indexOf("iphone"),v=-1!==i.indexOf("ipod"),y=-1!==i.indexOf("ipad"),w=_||y||v,b=-1!==i.indexOf("android"),$=-1!==i.indexOf("wp7"),E=w||b||$,k=(a?"msie":g&&"firefox")||d&&"opera"||f&&"chrome"||p&&"safari",T="CSS1Compat"===document.compatMode,O=!T,L=a&&O&&document.documentElement&&!!document.documentElement.style.setExpression,x=document.documentMode||a,A=-1!==i.indexOf("windows")||-1!==i.indexOf("win32"),R=-1!==i.indexOf("macintosh")||-1!==i.indexOf("mac os x"),I="https:"===document.location.protocol,C=n.language||n.browserLanguage||n.userLanguage||n.systemLanguage,S={noBoxSizing:x<=7,ie:{cssBottomRight:l,cssFixed:l||L,buggyCSS:l||L}},D="textContent"in document.createElement("div"),N=!1,M=null;try{window.CustomEvent&&/\[native code\]|\[object CustomEventConstructor\]/.test(window.CustomEvent.toString())&&(new window.CustomEvent("testevent",{bubbles:!1,cancelable:!0,detail:!0}),N=!0,M=window.CustomEvent)}catch(e){}switch(k){case"msie":case"firefox":case"chrome":t=+/\d+/.exec(new RegExp(k+"[ /]\\d+").exec(i)||"");break;default:t=+/\d+/.exec(/version[ \/]\d+/.exec(i)||"")}var P=!1;try{var V={get passive(){P=!0}},j=function(){};window.addEventListener("test",j,V),window.removeEventListener("test",j,V)}catch(e){P=!1}if(l){var U=[];S.leaksMemory=function(e){o.isFunction(e),U.push(e)};S.leaksMemory.remove=function(e){for(var t=U.length-1;t>=0;t--)e==U[t]&&U.splice(t,1)},window.attachEvent("onunload",function(){for(var e=0;e<U.length;e++)U[e]()})}return{browser:k,version:t,isStrict:T,isQuirks:O,isOpera:d,isSafari:p,isWebKit:m,isChrome:f,isAndroid:b,isIPhone:_,isIPod:v,isIPad:y,isIOS:w,isWP7:$,isMobile:E,isNewIE:s,isEdge:h,isIE:a,isIE6:l,isIE7:u,isIE8:c,isFF:g,isCustomEvents:N,CustomEvent:M,engineIE:x,bugs:S,isWindows:A,isMac:R,isSecure:I,secureURL:function(e){return e.replace(/^http:/,I?"https:":"http:")},hasFlash:function(){var e,t=n.plugins&&n.plugins["Shockwave Flash"];if(t)return(e=n.mimeTypes&&n.mimeTypes["application/x-shockwave-flash"])&&!e.enabledPlugin?null:t.description;if(window.ActiveXObject)try{return(t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")).AllowScriptAccess="always",t.GetVariable("$version")}catch(e){}}(),hasJava:function(){var e=n.mimeTypes;return a?!$&&"javaEnabled"in n&&n.javaEnabled():e&&(e=e["application/x-java-vm"])&&(e=e.enabledPlugin)?e.name:void 0}(),language:C,getScrollbarSize:function(){if(!r(e))return e;var t=document.createElement("div"),n=document.createElement("div"),i=t.style,o=n.style;return i.overflow="auto",i.width=i.height="100px",i.position="absolute",i.top="-1000px",o.width="100%",o.height="200px",t.appendChild(n),document.body.appendChild(t),e=t.offsetWidth-t.clientWidth,document.body.removeChild(t),e},getWindowClientHeight:function(){if(void 0!==window.innerHeight)return window.innerHeight;if(document.documentElement)return document.documentElement.offsetHeight;var e=document.getElementsByTagName("body");return e.length?e[0].clientHeight:0},getWindowClientWidth:function(){if(void 0!==window.innerWidth)return window.innerWidth;if(document.documentElement)return document.documentElement.offsetWidth;var e=document.getElementsByTagName("body");return e.length?e[0].clientWidth:0},isTextContent:D,hasPassiveListeners:P}}var o=n(23),r=n(1),s=i();s.sniffBrowser=i,e.exports=s},function(e,t,n){function i(e){e&&!f.test(e)&&(e=null);var t="id."+(u.brandDomain||"zopim.com");return"https://"+(e||t)+"/authenticated/web/jwt"}var o=n(1),r=n(4),s=n(2),a=n(46),c=n(21),u=function(){for(var e=function(){if(window.$zopim&&window.$zopim.s)return window.$zopim.s.src;for(var e,t=document.getElementsByTagName("script"),n=/.*zopim.(com|net|org)\//,i=0,o=t.length;i<o;i++)if(e=t[i].src||"",n.test(e))return e;return""}(),t=[/\/?[?]/,/\/livechat\//],n=[],i=0;i<t.length&&!(n=e.split(t[i])).length;i++);var o=n[1],r=n[0],s=/^(https?:)?\/\/[^\/]+/.exec(r),a=r.replace(/^(https?:)?\/\//i,"").split("/")[0],c=a.replace(/(.+\.)(?=.+\..+)/,""),u=n[0].split("/");return{accountKey:o,brandDomain:c,baseURL:u=u.pop()==a?n[0]:u.join("/"),rootURL:s=s&&"zopim.com"!==a?s[0]:"https://v2.zopim.com"}}(),l="https://v2.zopim.com/widget",d=l+"/images",h=a.map([".zopim.com",".zopim.org",".zdch.at",".zd-dev.com",".bre-zd.com"],c.escape),f=new RegExp("^[a-z][a-z0-9_-]*(\\.[a-z][a-z0-9_-]*)*("+h.join("|")+")(:\\d+)?$","i"),p=/^([a-z][a-z0-9_-]*)(:\d+)?$/i;o(r.baseURL,!0)&&(r.baseURL=s.secureURL(u.baseURL));var m={ASSETS_URL:l,IMAGES_URL:d,SOUNDS_URL:"https://v2.zopim.com/widget/sounds",FONTS_URL:"https://v2.zopim.com/widget/fonts",ASSETS_LEGACY:document.location.protocol+"//cdn.zopim.com/assets",BRANDING_URL:"https://www.zopim.com",AVATARS:{CONCIERGE:d+"/avatar_simple_agent.png",AGENT:d+"/avatar_simple_agent.png",VISITOR:d+"/avatar_simple_visitor.png",DEFAULT:d+"/avatar_simple_visitor.png"},ACCOUNT_KEY:u.accountKey,BRAND_DOMAIN:u.brandDomain,COUNTRY_CODE:function(){var e='\x3c!--# echo var="http_cf_ipcountry" default="geo" --\x3e'.toUpperCase();return"<"==e.charAt(0)&&(e="geo"),e}(),AUTH_URL:"https://www.zopim.com/auth/$NAME/$KEY-$MID",AUTH_LOGOUT_URL:"https://www.zopim.com/auth/logout/$KEY-$MID",AUTH_SERVER_URL:i(),IS_POPOUT:window.$zopim_popout,POPOUT_WINDOW_PREFIX:"zlivechatpopout_",POPOUT_URL:u.rootURL+"/widget/livechat.html",CALLBACK_FILE_UPLOAD_PATH:"/client/widget/upload",FILE_UPLOAD_PATH:"/client/widget/uploads",FILE_UPLOAD_MAX:20971520,RESEND_MSG_TIMEOUT:5e3,FILE_REPLACE_SOURCE:/^(\s*https?\:\/\/v2(?:assets|uploads)\.zopim\.)com(\/)/i,FILE_REPLACE_RESULT:"$1io$2",CHAT_LOG_REMEMBER_COUNT:10,getAuthServerURL:i,getMediatorHost:function(e){if(e){if(p.test(e))return e.replace(p,"$1.zopim.com$2");f.test(e)||(e=null)}var t="widget-mediator."+(u.brandDomain&&u.brandDomain.replace(/:[0-9]+/,"")||"zopim.com");return e||t}};e.exports=m},function(e,t){e.exports={build_number:"20200423.075440",git_commit:"a2e84ec3fc0a7507e1dcc0cd9c0b4c7c6519e194",release_tag:"1.11.2"}},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,n){function i(e,t){for(var n,i=document.createElement("div"),o=0,r=h.length;o<r;o++)if(void 0!==i.style[h[o]]){n=t[o];break}return n?e?function(e,t,i){e.autobind(t,n,i)}:function(e,t,i){f&&e.autounbind(t,n,i)}:function(){}}var o,r=n(2),s=n(1),a=n(11),c=n(16),u=n(3),l="-webkit- -moz- -o- -ms- ".split(" "),d="webkit Moz O ms ".split(" "),h=["transition","MozTransition","OTransition","WebkitTransition"],f=["transitionend","transitionend","otransitionend","webkitTransitionEnd"],p=["animationend","animationend","oanimationend","webkitAnimationEnd"],m={contains:function(){var e=document.documentElement;return e.compareDocumentPosition?function(e,t){return e=e.dom||e,t=t.dom||t,!!(16&e.compareDocumentPosition(t))}:e.contains?function(e,t){e=e.dom||e,t=t.dom||t;var n=9===e.nodeType?e.documentElement:e,i=t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:function(e,t){for(e=e.dom||e,t=t.dom||t;t=t.parentNode;)if(t===e)return!0;return!1}}(),onTransitionEnd:i(!0,f),unTransitionEnd:i(!1,f),onAnimationEnd:i(!0,p),unAnimationEnd:i(!1,p),css_prefixes:l,cssom_prefixes:d,isStyleSupported:function(){var e=document.createElement("div").style;return function(t){for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=(t+" "+d.join(n+" ")+n).split(" "),o=0;o<i.length;o++)if(void 0!==e[i[o]])return!0;return!1}}(),pick:function(e,t){for(var n={},i=0,o=t.length;i<o;i++){var r=t[i];r in e&&(n[r]=e[r])}return n},shallowExtend:function(){for(var e,t,n=arguments.length,i=1,o=arguments[0]||{};i<n;i++)if(null!=(e=arguments[i]))for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&o!==e[t]&&(o[t]=e[t]);return o},fullyExtend:function e(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(n[i]&&n[i].constructor&&n[i].constructor===Object?(t[i]=t[i]||{},e(t[i],n[i])):t[i]=n[i]);return t},fullyDelete:function e(t,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(!(i in t))continue;n[i]&&n[i].constructor&&n[i].constructor===Object?e(t[i],n[i]):delete t[i]}return t},computedHeightBoxSizingBug:function(){if(void 0===o)try{o=function(){if(!window.getComputedStyle)return!1;var e=document.createElement("div"),t="border-box";document.body.appendChild(e),e.style.height="10px",e.style.padding="5px",e.style.boxSizing=t,e.style.webkitBoxSizing=t,e.style.mozBoxSizing=t;var n=parseInt(window.getComputedStyle(e).height,10);return document.body.removeChild(e),10!=n}()}catch(e){}return o},getComputedHeight:function(e){var t=e.getComputedStyle();if("auto"==t.height)return e.getHeight();var n=parseInt(t.height,10)||0;return m.computedHeightBoxSizingBug()&&(n+=(parseInt(t.paddingTop,10)||0)+(parseInt(t.paddingBottom,10)||0)+(parseInt(t.borderTopWidth,10)||0)+(parseInt(t.borderBottomWidth,10)||0)),n+"px"},hoverFix:function(e){r.bugs.noBoxSizing&&(e.on("mouseover",function(){this.addClass("hover")}),e.on("mouseout",function(){this.removeClass("hover")}))},getEffectiveTLD:function(e){for(var t=e.split("."),n="."+t.splice(t.length-2,2).join(".");t.length;){var i={domain:n,path:"/"};if(c.set("zte2095","1",i),"1"==c.get("zte2095")){c.remove("zte2095",i);break}n="."+t.pop()+n}return n},descendsObj:function(e,t){for(var n,i=t.split(".");i.length;)n=i.shift(),s(e[n],!0)&&(e[n]={}),e=e[n];return e},insertObj:function(e,t,n){var i=(e=e.split(".")).pop();if(i){for(var o=0,r=e.length;o<r;o++)e[o]in n||(n[e[o]]={}),n=n[e[o]];n[i]=t}},getValueByReference:function(e,t){if(0===t.indexOf(e.path)){for(var n,i=e.path.split(".").length,o=t.split(".").slice(i),r=e.update;o.length;){if(!((n=o.shift())in r))return;r=r[n]}return r}},isDefaultName:function(e){return g.test(e)},getKeys:function(e){if(e&&"object"==typeof e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},supportsDataURI:function(e){if(window.Image)try{var t=new window.Image;t.onload=t.onerror=function(){e(!(1!=this.width||1!=this.height))},t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}catch(t){e()}else e()},isIE:r.isIE||/Trident\//.test(window.navigator.userAgent),pad:function(e,t){e=parseInt(e,10),isNaN(e)&&(e=0);var n=e<0;e=Math.abs(e).toString().split("");for(var i=Math.max(t-e.length,0);i--;)e.unshift("0");return n&&e.unshift("-"),e.join("")},formatMinutesAsHours:function(e,t){function n(e,t,n){return n.replace("<hours>",e).replace("<minutes>",t)}var i=a("<hours>:<minutes>"),o=a("<hours>:<minutes> am"),r=a("<hours>:<minutes> pm"),s="24"===t?24:12,c=function(e,t){return e-Math[e>0?"floor":"ceil"](e/t)*t}(Math[e>0?"floor":"ceil"](e/60),s),u=m.pad(Math.abs(e)%60,2);if(24===s)return n(m.pad(c,2),u,i);var l=0===c?12:c;return Math.abs(e/60)%24<12?n(l,u,o):n(l,u,r)},replaceFileHostname:function(e){return e&&e.replace(u.FILE_REPLACE_SOURCE,u.FILE_REPLACE_RESULT)},getLastLogEntries:function(e,t){if(!(t=parseInt(t,10)))return e.getValue();var n=e.getKeys(),i=n.length,o={};if(i<=t)return e.getValue()||o;for(var r=0;r<i;r++)n[r]=parseInt(n[r],10);n=n.sort().slice(-t);var s,a=e.getValue();if(!a)return o;for(r=0,i=n.length;r<i;r++)o[s=n[r]]=a[s];return o},writeNode:function(e,t){var n;e.leaf&&e.parentNode?((n={})[e.name]=t,e.parentNode.write(n)):e.write(t)},isAgentNick:function(e){return _.test(e)},refocusActiveElement:function(){if(r.isNewIE)try{"body"!==document.activeElement.nodeName.toLowerCase()&&document.activeElement.focus()}catch(e){}},warnBadEmbed:function(){window.console&&window.console.warn&&window.console.warn("The Zopim widget embed code is invalid. Please email chat@zendesk.com with your account key: "+u.ACCOUNT_KEY)},getAuthLoginUrl:function(e,t,n){return u.AUTH_URL.replace("$NAME",e).replace("$KEY",t).replace("$MID",n)}},g=/^Visitor [0-9]{3,}$/,_=/^agent:[0-9]+/i;e.exports=m},function(e,t){e.exports=function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){function i(e){return this instanceof i?e?i.parseQuery(e):void(this.store={}):(c||i._initSingleton(window),c)}function o(e,t,n){if(void 0===t&&void 0===n)return e;if(void 0===t&&(t="string"),!(t in a))throw"invalid type requested";return void 0===e?void 0!==n?n:a[t]:"boolean"===t?s.test(e):"integer"===t?!0===e?1:parseInt(e,10):"float"===t?!0===e?1:parseFloat(e):e}var r=n(7),s=/^(1|on|true)$/i,a={boolean:!1,integer:0,float:0,string:""},c=null;i._initSingleton=function(e){c=new i(e.location.search)},i.buildQuery=function(e){var t,n,i,o,s,a,c=[],u=[];for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&c.push(s);for(c.sort(),t=0,i=c.length;t<i;t++)if(a=e[s=c[t]],s=window.encodeURIComponent(s),r(a))if(1!==a.length||!0!==a[0])for(n=0,o=a.length;n<o;n++)u.push(s+"="+window.encodeURIComponent(a[n]+""));else u.push(s);else u.push(s+"="+window.encodeURIComponent(a+""));return u.join("&")},i.parseQuery=function(e){var t,n,o,r,s=new i,a=(e=e.replace(/^\?|\/+$/g,"")).split("&");for(t=0,n=a.length;t<n;t++){var c=a[t];if(c.length){var u=c.indexOf("=");u<=-1?(o=c,r=!0):(o=c.slice(0,u),r=window.decodeURIComponent(c.slice(u+1))),s.add(window.decodeURIComponent(o),r)}}return s},i.getHash=function(e,t){var n=t||window.location.hash;return i.parseQuery(n.replace(/^#/,"")).get(e)};var u=i.prototype;u.add=function(e,t){this.has(e)?this.store[e].push(t):this.store[e]=[t]},u.has=function(e){return Object.prototype.hasOwnProperty.call(this.store,e)},u.getLast=function(e,t,n){return this.has(e)?this.getAt(e,this.store[e].length-1,t,n):o(void 0,t,n)},u.getFirst=function(e,t,n){return this.getAt(e,0,t,n)},u.getAt=function(e,t,n,i){return o(this.has(e)?this.store[e][t]:void 0,n,i)},u.getRaw=function(e){return this.has(e)?this.store[e].concat():[]},u.get=u.getLast,u.toString=function(){return i.buildQuery(this.store)},e.exports=i},function(e,t,n){var i=n(5),o={bind:function(e,t){if(!i(e))throw new TypeError("FunctionUtils.bind - what is trying to be bound is not callable");if(i(e.bind)&&!("prototype"in e.bind))return e.bind.apply(e,r.call(arguments,1));var n=r.call(arguments,2),o=function(){},s=function(){return e.apply(this instanceof o&&t?this:t,n.concat(r.call(arguments)))};return o.prototype=s.prototype,s.prototype=new o,s},once:function(e){var t;return function(){if(!t)return t=!0,e.apply(this,r.call(arguments))}}},r=Array.prototype.slice;e.exports=o},function(e,t,n){function i(e){return'"'+e.replace(u,o)+'"'}function o(e){return l[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}function r(e,t,n){return t?f[t]:String.fromCharCode(parseInt(n,16))}var s=n(1),a=n(7),c=!s(window)&&window.JSON||{parse:function(e){var t,n,i,o,s,a=e.match(d),c=a.length,u=a[0];"{"==u?(t={},s=1):"["==u?(t=[],s=1):(t=[],s=0,n=!0);var l=[t];for(c=a.length;s<c;++s)switch((u=a[s]).charCodeAt(0)){case 91:o=l[0],l.unshift(o[i||o.length]=[]),i=void 0;break;case 93:l.shift();break;case 123:o=l[0],l.unshift(o[i||o.length]={}),i=void 0;break;case 125:l.shift();break;case 102:(o=l[0])[i||o.length]=!1,i=void 0;break;case 110:(o=l[0])[i||o.length]=null,i=void 0;break;case 116:(o=l[0])[i||o.length]=!0,i=void 0;break;case 34:if(-1!==(u=u.substring(1,u.length-1)).indexOf(m)&&(u=u.replace(h,r)),o=l[0],null==i){if(!(o instanceof Array)){i=u||p;break}i=o.length}o[i]=u,i=void 0;break;default:(o=l[0])[i||o.length]=+u,i=void 0}if(n){if(1==l.length)return t[0]}else if(!l.length)return t;throw"error"},stringify:function e(t){switch(typeof t){case"string":return i(t);case"number":return isFinite(t)?t.toString():"null";case"boolean":return String(t);case"object":if(!t)return"null";var n,o,r=[];if(a(t)){for(n=0,o=t.length;n<o;n++)r[n]=e(t[n])||"null";return"["+r.join(",")+"]"}var s,c,u=[];for(s in t)t.hasOwnProperty(s)&&u.push(s);for(u.sort(),n=0,o=u.length;n<o;n++)(c=e(t[s=u[n]]))&&r.push(i(s)+":"+c);if(r.length)return"{"+r.join(",")+"}"}}},u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\",'"':'\\"'},d=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),h=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),f={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},p=new String(""),m="\\";e.exports=c},function(e,t,n){function i(e,t){if(isNaN(e)){var n=new o;return n.add("_",e),n}-1==e&&(e=f.length);var i=f[e];if(i||(f[e]=i=new o),"string"==typeof t)i.add("_",t);else for(var r in t)t.hasOwnProperty(r)&&i.add(r,t[r]);return i}function o(){function e(e){return n[e||p]||n._}function t(e,t){var i,r=new o;for(var s in f[n._]=r,n)if(n.hasOwnProperty(s)){if("string"!=typeof(i=n[s]))continue;i=i[e].apply(i,t),r.add(s,i)}return r}for(var n={},i=[],s={add:function(e,t){n[e]=t},bind:function(e){r(e,s)},onTranslate:function(e){i.push(e)},toJSON:function(){return e()},toString:e,update:function(t){var n,o=e(t);for(n=0;n<i.length;n++)i[n](o)}},a=["concat","replace","toLowerCase","toUpperCase"],c=0;c<a.length;c++)s[a[c]]=function(e){return function(){return t(e,arguments)}}(a[c]);return s}function r(e,t){for(var n=0;n<m.length;n++)if(m[n]==e)return void(g[n]=t);m.push(e),g.push(t)}function s(e){var t=(e=e.split(/-|_/).slice(0,2))[0]=e[0].toLowerCase();return e[1]&&(e[1]=e[1].toUpperCase()),e=e.join("_"),l.languages?e in l.languages?e:t in l.languages?t:null:null}function a(){return!(-1==p.search(y))}function c(){var e=l.strings;if(e)for(var t=0;t<e.length;t++)i(t,e[t])}var u=n(2),l=n(4),d=n(19),h=n(43),f=[],p="_",m=[],g=[],_=[],v=u.isTextContent,y=/^ar|^fa|^he|^ur/;i.bind=r,i.flip=function(e){return a()?e.replace(/left/,"%left%").replace(/right/,"left").replace(/%left%/,"right").replace(/ltr/,"%ltr%").replace(/rtl/,"ltr").replace(/%ltr%/,"rtl"):e},i.onLanguage=function(e){_.push(e)},i.unLanguage=function(e){for(var t=0,n=_.length;t<n;t++)if(_[t]==e){_._active?(_[t]=null,_._dirty=!0):t==n-1?_.pop():_[t]=_.pop();break}},i.update=function(e){var t,n,o,r,a;(e=s(e))&&l.languages[e]&&(a=d[l.languages[e]])&&(i.language=p=e,h.ensureLoaded(a,function(i){if(i&&function(e){var t,n=d[l.languages[e]];for(t=0;t<n.length;t++)0!==n[t]&&f[t].add(e,n[t])}(e),e==p){for(t=0,n=f.length;t<n;t++)f[t].update instanceof Function&&f[t].update(e);for(t=0,n=m.length;t<n;t++)if(o=m[t],r=g[t].toString(),v)o.textContent=r;else if("string"==typeof o.innerText)o.innerText=r;else if("string"==typeof o.nodeValue)try{o.data=r}catch(e){}for(_._active=!0,n=_.length,t=0;t<n;t++)try{_[t]&&_[t](e)}catch(e){}if(_._active=!1,_._dirty){for(t=0;t<n;t++)_[t]||(t==n-1?_.pop():_[t--]=_.pop(),n--);_._dirty=!1}}}))},i.unbind=function(e){for(var t=0;t<m.length;t++)if(m[t]==e)return m.splice(t,1),void g.splice(t,1)},i.rtl=a,i.findClosestLanguage=s,i.loadDefaultStrings=c,c(),e.exports=i},function(e,t){e.exports=function(e){return"string"==typeof e}},function(e,t,n){var i,o,r,s=n(12),a=n(9),c=n(8),u=n(3),l={authenticate:function(e){i&&i(a.once(function(t){t&&s(t)?l.exchangeToken({account_key:u.ACCOUNT_KEY,auth_url:p,site_jwt:t,state:o&&o.state?o.state:null},function(t,n){o=n,r&&r.$("visitor").$("authenticated$bool").update(!t),e(t)}):e({reason:"invalid jwt in callback"})}))},isAuthenticated:function(){return!!o},getSiteJWTFunc:function(){return i},retrieveIDToken:function(e){o?+new Date-o.issued_at>=o.expires_in-6e4?l.authenticate(function(t){t?(r&&r.$("visitor").$("auth_status$string").update("failed"),e(t,null)):e(null,o.id_token)}):e(null,o.id_token):e(null,null)},clearIdentity:function(){i=void 0,o=void 0,r&&r.$("visitor").$("authenticated$bool").update(!1)},setOverrideHost:function(e){p=e?u.getAuthServerURL(e):u.AUTH_SERVER_URL},setSiteJWTFunc:function(e){i=e},setDataNode:function(e){r=e},exchangeToken:function(e,t){var n=new XMLHttpRequest;n.open("POST",e.auth_url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){if(t){var e;try{var i=n.response;if(""===i)throw d;e=JSON.parse(i)}catch(e){return void t({reason:d})}200===n.status?t(void 0,{issued_at:+new Date,id_token:e.id_token,expires_in:1e3*e.expires_in,state:e.state}):t({reason:f,details:e.details})}},n.onerror=function(){t&&t({reason:h})};var i={account_key:e.account_key,token:e.site_jwt,format:"json"};e.state&&(i.state=e.state);var o=c.buildQuery(i);n.send(o)}},d="format error",h="network/security error",f="jwt verification error",p=u.AUTH_SERVER_URL;e.exports=l},function(e,t,n){function i(){d.remove(_,{path:"/",domain:a})}function o(e){e=(e=c(e))?1:0,d.set(y,e,{path:"/",ttl:365,domain:a})}function r(e){return d.getJSONCookie(e)[m]}var s,a,c=n(38),u=n(8),l=n(37),d=n(16),h=n(3),f=n(6),p=48e4,m=h.ACCOUNT_KEY,g="__zlcstore",_="__zlcmid",v="__zlcpomid",y="__zlcprivacy",w={init:function(e){d.setActivityWindow(e),m=h.ACCOUNT_KEY,s=(e||window).location.hostname,a=/\b(?:\d{1,3}\.){3}\d{1,3}/.test(s)?s:f.getEffectiveTLD(s)},DOM:{saveVariable:function(e,t){var n=l.get(g)||{};n[m]||(n[m]={});var i=n[m];i[e]=t,i.timestamp=+new Date,l.set(g,n)},getVariable:function(e){var t=l.get(g)||{};if(!t[m])return{};var n=t[m];return n.timestamp?+new Date-n.timestamp>p?{}:n[e]:n[e]||{}}},Cookie:d,clearAll:function(){i(),l.remove(g)},setIdentity:function(e){d.set(_,e,{path:"/",ttl:365,domain:a})},getIdentity:function(){return h.IS_POPOUT?d.get(v)||u().get("mid"):function(){var e=d.getJSONCookie("__zlcid");if(d.remove("__zlcid",{path:"/"}),e.mID)return e.mID;var t=r("__zlcstore");return d.remove("__zlcstore",{path:"/",domain:a}),t&&t.mID?t.mID:void 0}()||d.get(_)||""},clearIdentity:i,clearAllowCookieLaw:function(){d.remove(y,{path:"/",domain:a})},getAllowCookieLaw:function(){var e=function(){var e,t=r("__zlcprivacy");return"boolean"==typeof t&&(e=t,o(t)),e}();if("boolean"==typeof e)return e;var t=d.get(y);return 0!==(t=parseInt(t,10))&&(1===t||void 0)},setAllowCookieLaw:o};e.exports=w},function(e,t,n){function i(){var e=this;return this.arr=[],this.validate=s.bind(this.validate,this),u.concat(["validateAndThrow","validateAndLog"]).forEach(function(t){e.validate[t]=e[t].bind(e)}),this.validate}function o(e,t){this.message=e,this.actual=t,this.paths=void 0,this.unshiftPath=function(e){return this.paths||(this.paths=[]),this.paths.unshift(e),this}}var r=n(7),s=n(9),a=window.Error,c={any:function(e){return function(t){if(0===e.length)return!1;for(var n=0,i=e.length;n<i;n++)if(!(0,e[n])(t))return!1;return new o('Expect "'+t+'" to fulfill at least one condition',t)}},equal:function(e){return function(t){if(t!==e)return new o('expect "'+t+'" to equal "'+e+'"',t)}},obj:function(e,t){return function(n){if("object"!=typeof n||!n)return new o('Expect "'+n+'" to be an object',n);if(t&&t.requiredKeys)for(var i=0,r=t.requiredKeys.length;i<r;i++){var s=t.requiredKeys[i];if(!(s in n))return new o('Expect key "'+s+'" to be defined',n).unshiftPath(s)}for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var c,u=n[a],l=e[a];if(l)c=l(u);else{if(t&&!t.whitelistedKeysOnly)continue;c=new o('The key "'+a+'" is not whitelisted',n)}if(c)return c.unshiftPath(a)}}},type:function(e){return function(t){if(typeof t!==e)return new o('Expect "'+t+'" to have type "'+e+'"',t)}},ok:function(){return function(e){if(!e)return new o('Expect "'+e+'" to be truthty',e)}},chain:function(e){return e},regex:function(e){return function(t){if(e.lastIndex=0,!e.test(t))return new o('Expect "'+t+'" to match predefined format',t)}},minLength:function(e){return function(t){if(t.length<e)return new o('Expect the length of "'+t+'" to be at least '+e,t)}},maxLength:function(e){return function(t){if(t.length>e)return new o('Expect the length of "'+t+'" to be at most '+e,t)}},array:function(){return function(e){if(!r(e))return new o('Expect "'+e+'" to be an Array',e)}},each:function(e){return function(t){var n;if(!r(t))return new o('Expect "'+t+'" to be an Array',t);for(var i=0,s=t.length;i<s;i++)if(n=e(t[i]))return n.unshiftPath(i)}},predicate:function(e,t){return function(n){if(!e(n))return new o('Expect "'+n+'" to '+t,n)}}},u=Object.keys(c),l=i.prototype;u.forEach(function(e){var t=c[e];i[e]=l[e]=function(){if(!(this instanceof i)){var n=new i;return n[e].apply(n,arguments)}var o=t.apply(null,arguments);return this.arr.push(o),this.validate}}),l.validate=function(e){for(var t,n=0,i=this.arr.length;n<i;n++)if(t=(0,this.arr[n])(e))return t},l.validateAndThrow=function(e,t){var n=this.validate(e);if(t=t?t+" - ":"",n)throw new a(t+n.message)},l.validateAndLog=function(e,t){var n=this.validate(e);if(t=t?t+" - ":"",n)return function(e){var t=window.console;t.error?t.error(e):t.log&&t.log(e)}(new a(t+n.message)),n},e.exports=i,o.prototype=Object.create(a.prototype),o.prototype.name="ValidationError"},function(e,t,n){function i(e){return function(e){return"string"==typeof e&&""!=e}(e)&&function(){var e,t,n,i,o=u.document.cookie,r={};if(!o||"string"!=typeof o)return{};for(e=(o=o.split(/;\s/)).length;e--;)try{if(!(t=o[e].match(/^([^=]+)(=(.*))?$/)))continue;n=c(t[1]),i=c(t[3]||""),r[n]=i}catch(e){}return r}()[e]||null}function o(e,t,n){n=n||{};var i=a(e)+"="+a(t);if("ttl"in n){var o=new Date,r=24*n.ttl*60*60*1e3;o.setTime(o.getTime()+r),i+="; expires="+o.toGMTString()}"path"in n&&(i+="; path="+n.path),"domain"in n&&(i+="; domain="+n.domain),n.secure&&(i+="; secure"),i+="; SameSite="+(n.samesite||"Lax"),u.document.cookie=i}var r=n(10),s={set:o,get:i,getJSONCookie:function(e){var t=i(e),n={};try{n=r.parse(t)}catch(e){}return n&&"object"==typeof n?n:{}},setJSONCookie:function(e,t,n){"object"!=typeof t&&(t={}),o(e,r.stringify(t),n)},remove:function(e,t){(t=t||{}).ttl=-1,o(e,"",t)},setActivityWindow:function(e){u=e||window,a=u.encodeURIComponent,c=u.decodeURIComponent}},a=window.encodeURIComponent,c=window.decodeURIComponent,u=window;e.exports=s},function(e,t,n){function i(e,t,n){if(s.ok("function"==typeof e,"1st argument to nextTick must be a function"),n)for(var i=u.length;i-- >0;)if(u[i][0]===e&&u[i][1]===t)return;u.push([e,t]),r||(r=setTimeout(o,0))}function o(){var e=+new Date+c,t=u;u=[],r&&(r=clearTimeout(r));for(var n=0,i=t.length;n<i;n++){try{t[n][0].apply(t[n][1])}catch(e){a.fire("error",e)}if(+new Date>e){n<i-1&&(t.splice(0,n+1),u.length?u=t.concat(u):(u=t,r=setTimeout(o,0)));break}}}var r,s=n(23),a=n(0),c=100,u=[];i.tick=o,e.exports=i},function(e,t,n){function i(e){var t,n,i=o.extend(this);try{(t=new window.ActiveXObject("htmlfile")).open(),t.write("<script>document.win = window<\/script>"),t.close(),n=t.win}catch(e){}if(!n){var s=this.iframe=document.createElement("iframe"),a=s.style;i.allowTransparency="true",i.frameBorder="0",a.backgroundColor="transparent",a.position="absolute",a.width=a.height="1px",a.left=a.top="-9999px",a.border=0,document.body.appendChild(s);try{(t=(n=s.contentWindow).document).open(),t.close()}catch(e){return i.fire("error"),void i.destroy()}}i.doc=t,i.win=n,i.$Loader={cleanup:function(){r(function(){i.$Loader.payload?i.fire("success",i.$Loader.payload):i.fire("error"),i.$Loader.payload=null,e||i.destroy()})}},i.reusable=e}var o=n(0),r=n(17);i.prototype.setScope=function(e){this.scope=e};var s=/[&<>"']/g;i.prototype.load=function(e){if(/^(?:https?:)?\/\//i.test(e)){e=function(e){return e&&e.replace(s,function(e){return"&#"+e.charCodeAt(0)+";"})}(e);try{this.doc.open(),this.win.$Loader=this.$Loader,this.win.$Loader.scope=this.scope||{},this.doc.write('<html><head><script src="'+e+'"><\/script><script>document.addEventListener && document.addEventListener("DOMContentLoaded", function() {try { $Loader.cleanup() } catch(e) {}})<\/script></head><body></body></html>'),this.doc.close()}catch(e){this.$Loader.cleanup()}}else this.$Loader.cleanup()},i.prototype.destroy=function(){try{this.iframe&&document.body.removeChild(this.iframe),this.doc=this.win=this.iframe=this.win.$Loader=null}catch(e){}},e.exports=i},function(e,t,n){var i=n(4),o={};o.$Data=i,e.exports=o},function(e,t){var n={debounceExceptFirst:function(e,t){function n(){a=!a,e.apply(o,i)}var i,o,r,s,a=!0;return function(){if(i=Array.prototype.slice.call(arguments),o=this,a)return s=setTimeout(function(){a=!0},t),n();s&&clearTimeout(s),r&&clearTimeout(r),r=setTimeout(n,t)}},debounce:function(e,t){function n(){e.apply(o,i)}var i,o,r;return function(){r&&clearTimeout(r),i=Array.prototype.slice.call(arguments),o=this,r=setTimeout(n,t)}},throttle:function(e,t){function n(){s=+new Date,r=null,e.apply(o,i)}var i,o,r,s=0;return function(){if(i=Array.prototype.slice.call(arguments),o=this,!r){var e=+new Date-s;e>=t?n():r=setTimeout(n,t-e)}}},queue:function(e,t){function n(){s=+new Date,i=o.length>1?setTimeout(n,t):null,e.apply(r.shift(),o.shift())}var i,o=[],r=[],s=0;return function(){if(o.push(Array.prototype.slice.call(arguments)),r.push(this),!i){var e=+new Date-s;e>=t?n():i=setTimeout(n,t-e)}}}};e.exports=n},function(e,t){var n="[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+([a-z0-9][a-z0-9-]*[a-z0-9])",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)",o={email:new RegExp("^"+n+"$","i"),ip_token:new RegExp("^"+i+"$"),ip:new RegExp("^(?:"+i+"\\.){3}"+i+"$"),tld:/^(AERO|ARPA|ASIA|A[CDEFGILMNOQRSTUWXZ]|BIZ|B[ABDEFGHIJMNORSTVWYZ]|CAT|COM|COOP|C[ACDFGHIKLMNORUVXYZ]|D[EJKMOZ]|EDU|E[CEGRSTU]|F[IJKMOR]|GOV|G[ABDEFGHILMNPQRSTUWY]|H[KMNRTU]|INFO|INT|I[DELMNOQRST]|JOBS|J[EMOP]|K[EGHIMNPRWYZ]|L[ABCIKRSTUVY]||MIL|MOBI|MUSEUM|M[ACDEGHKLMNOPQRSTUVWXYZ]|NAME|NET|N[ACEFGILOPRUZ]|ORG|OM|PRO|P[AEFGHKLMNRSTWY]|QA|R[EOSUW]|S[ABCDEGHIJKLMNORTUVYZ]|TEL|TRAVEL|T[CDFGHJKLMNOPRTVWZ]|U[AGKSYZ]|V[ACEGINU]|W[FS]|XN|Y[ET]|Z[AMW])$/i,search:{email:new RegExp(n,"ig"),email_lws:new RegExp("(^|\\s+)"+n,"ig"),hurl:/(^|\s+)(?:(?:https?|ftps?):\/\/)(?:\S+)/gi,url:/(^|\s+)(?:[\w-]+\.)+(\w{2,})(?::[0-9]+)?(?:\/\S*)?/g,phone_number:/(?:^|\s+)(?:(?:\+?\d{1,3}|\(\d{1,3}\))([-.\s])?)?\d{3,10}(?:([-.\s])\d{3,10})?/gi},escape:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};e.exports=o},function(e,t){e.exports=function(e){return"number"==typeof e}},function(e,t,n){function i(e,t){e||r.log(t)}var o=n(5),r={ok:i,isFunction:function(e,t){i(o(e),t)},log:function(){}};e.exports=r},function(e,t){function n(){o&&o.unbindValue(i)}function i(e){e&&"resume"==e.socket_status$string&&(s=setTimeout(i,1e3));var t=function(){var e=+new Date,t=c.getValue(),n=u.getValue(),i=l.getValue(),o=d.getValue(),r=h.getValue(),s=f.getValue();if((n||t||i)&&"disconnecting"!==i){if("break"==n){if(g.indexOf(t)>-1)return"closed";if("disconnected"===i)return"closed"}return(null===n||"reconnect"==n||"resume"==n&&e-o>=1e3)&&"reattached"===t&&r<=s?"connected":"connecting"}}();t&&t!==a&&(r.update({friendly_connection_status$string:t}),a=t)}var o,r,s,a,c,u,l,d,h,f,p,m,g=["idle_disconnect","shutdown","error"],_={init:function(e,t){o=e.$("connection"),r=t.$("tmp"),c=o.$("status$string"),u=o.$("socket_status$string"),l=o.$("disconnection_status$string"),d=o.$("socket_resume_timestamp$int"),h=o.$("socket_open_timestamp$int"),f=o.$("client_reattached_timestamp$int"),p=e.$("livechat").$("account").$("status$string"),m=e.$("visitor").$("auth_status$string"),o.bindValue(i)},reset:function(){n(),s=clearTimeout(s),o=r=null,c=u=l=d=h=f=p=m=null,a=void 0},destroy:n,getConnectionClosedReason:function(){var e=c.getValue(),t=p.getValue(),n=l.getValue(),i=m.getValue();return"banned"===t?"banned":"disconnected"===n?"failed"===i?"authentication_failed":"logged_out":"idle_disconnect"===e?"idle_disconnect":"error"===e||"shutdown"===e?"server_error":"unknown"}};e.exports=_},function(e,t,n){function i(){o.write({active$int:+new Date})}var o,r=n(0),s=n(20),a={init:function(e,t){t=t||window,o=e.$("livechat").$("profile");var n={window:r.extend(t,!0),document:r.extend(t.document,!0)},a=s.throttle(i,c);n.document.on("mousemove",a),n.window.on("click",a),n.window.on("scroll",a),n.window.on("keypress",a),a()}},c=3e5;e.exports=a},function(e,t,n){var i=n(11),o={livechat:{timestamp$int:+new Date,settings:{file_sending:{enabled$bool:!0},behavior:{do_not_display$bool:!1},theme:{name$string:"simple",message_type$string:"bubble_avatar",colors:{placeholder$string:"_"},chat_button:{position$string:"br",position_mobile$string:"br"},chat_window:{position$string:"br",size$string:"medium",profile_card:{display_avatar$bool:!0,display_rating$bool:!0,display_title_name$bool:!0},use_banner$bool:!0,title_bar:{hide_minimize$bool:!1,hide_popout$bool:!1}},branding:{type$string:"icon_font_zopim"}},greetings:{online$string:i("Chat With Us"),offline$string:i("Leave a Message")},banner:{enabled$bool:!0,layout$string:"image_right",text$string:i("Chat with us"),image_path$string:"",image_data$string:""},chat_button:{hide_when_offline$bool:!1},chat_window:{mobile_mode$string:"popout",title_bar:{title$string:i("support"),status_messages:{online$string:i("We're online."),away$string:i("We're away."),offline$string:i("We're offline.")}}},login:{allowed_types:{email$bool:!0,facebook$bool:!0,twitter$bool:!1,google$bool:!0},phone_display$bool:!1,restrict_profile$bool:!1},concierge:{display_name$string:i("Live Support"),title$string:i("Ask us anything"),avatar_path$string:"",avatar_data$string:"",greeting:{enabled$bool:!1,message$string:i("Hi, welcome to our website!")}},branding:{hide_branding$bool:!1,hide_favicon$bool:!1,custom_favicon_path$string:""},language:{language$string:"--"},cookie_law:{enabled$bool:!1},sound:{disabled$bool:!1},popout:{enabled$bool:!0},rating:{enabled$bool:!0},end_chat_menu:{enabled$bool:!0,message$string:""},emoticons:{enabled$bool:!1},bubble:{enabled$bool:!0,title$string:i("Questions?"),text$string:i("Click here to chat with us")},forms:{pre_chat_form:{required$bool:!1,profile_required$bool:!1,message$string:"",form:{0:{name$string:"name",required$bool:0},1:{name$string:"email",required$bool:0},2:{label$string:i("Choose a department"),name$string:"department",required$bool:0,type$string:"department"},3:{label$string:i("Message"),name$string:"message",required$bool:0,type$string:"textarea"},4:{label$string:i("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},offline_form:{message$string:i("Sorry, we aren't online at the moment. Leave a message and we'll get back to you."),message_disabled$string:i("Sorry, we aren't online at the moment."),post_submit_message$string:i("Thanks for the message! We'll get back to you as soon as we can."),profile_required$bool:!0,form:{0:{name$string:"name",required$bool:1},1:{name$string:"email",required$bool:1},2:{label$string:i("Message"),name$string:"message",required$bool:1,type$string:"textarea"},3:{label$string:i("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},post_chat_form:{header$string:i("Nice chatting with you!"),message$string:i("How would you rate the chat experience you just had?"),comments_enabled$bool:!0,comments_messages:{good:{message$string:i("Thanks for the good rating! Would you like to leave a comment?"),placeholder$string:i("What did you like about this chat?")},bad:{message$string:i("Sorry that we disappointed you. We'd appreciate it if you could tell us how to improve."),placeholder$string:i("What did you dislike about this chat?")}}},card_form:{}}}}};e.exports=o},function(e,t){var n=Array.prototype.indexOf;"function"==typeof n&&/\[native code\]/.test(n.toString())||(n=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&((i=Number(arguments[1]))!=i?i=0:0!=i&&i!=1/0&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);o<n;o++)if(o in t&&t[o]===e)return o;return-1}),e.exports=function(e,t,i){return n.call(t,e,i)}},function(e,t,n){var i=n(11),o=n(27),r=n(1),s=i("File size too large. Maximum limit is <size>."),a=i("The file you are trying to send is not supported."),c=i("File sending is temporarily disabled. Please try again later."),u=i("<size> bytes"),l=i("<size> KB"),d=i("<size> MB"),h={ERR_SIZE:"TOO_LARGE",ERR_FORMAT:"ILLEGAL_TYPE",ERR_DISABLED:"FILE_UPLOADS_TEMPORARILY_DISABLED"},f=/^(x-|vnd\.)/i,p=["png","jpg","jpeg","gif","txt","pdf"],m={},g=i("Failed to send. Please try again.");m[h.ERR_SIZE]=s,m[h.ERR_FORMAT]=a,m[h.ERR_DISABLED]=c,h.prettySize=function(){var e=[u,l,d],t=[0,1,2];return function(n,i){n=Math.max(parseInt(n,10)||0,0);for(var o,r=(i=i||{}).base2?1024:1e3,s=e.length;s--;)if(n>=(o=Math.pow(r,s)))return e[s].replace("<size>",(n/o).toFixed(t[s]))}}(),h.prettyType=function(e,t,n){n=n||window.Infinity;var i=e.split("/")[1];return(i=i&&i.replace(f,""))&&i.length<n?i.toLowerCase():((i=t.split(".").pop())||"").toLowerCase()},h.isValidType=function(e,t){if(e){t=t||p;var n=e.substr(e.lastIndexOf(".")+1).toLowerCase();return-1!==o(n,t)}},h.prettyError=function(e,t){var n=e in m?m[e]:g;return r(t)||(n=n.replace("<size>",h.prettySize(t||5e6))),n},h.blobToFile=function(e,t,n){return e.lastModifiedDate=new Date,e.name=t,new window.File([e],t,{type:n})},h.getExtension=function(e){var t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1).toLowerCase()},e.exports=h},function(e,t,n){function i(e){return p[e]||"UNKNOWN_ERROR"}var o,r,s,a=n(12),c=n(17),u=n(9),l=n(3),d=n(28),h=n(8),f=n(6),p={TOO_LARGE:"EXCEED_SIZE_LIMIT",ILLEGAL_TYPE:"INVALID_EXTENSION",NO_SESSION:"INTERNAL_ERROR",UNEXPECTED_ERROR:"INTERNAL_ERROR",UNABLE_TO_GET_SETTINGS:"INTERNAL_ERROR",S3_UPLOAD_ERROR:"INTERNAL_ERROR",NO_GATES:"INTERNAL_ERROR",FILE_UPLOADS_DISABLED:"NOT_ALLOWED",FILE_UPLOADS_TEMPORARILY_DISABLED:"INVALID_PLAN"},m={FILE_SENDING_ERRORS:{NOT_SUPPORTED:"NOT_SUPPORTED",NOT_ALLOWED:"NOT_ALLOWED",CONN_ERROR:"CONN_ERROR",INVALID_EXTENSION:"INVALID_EXTENSION",INVALID_PLAN:"INVALID_PLAN",EXCEED_SIZE_LIMIT:"EXCEED_SIZE_LIMIT",INTERNAL_ERROR:"INTERNAL_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},init:function(e,t){r=t,(o=e).$("livechat").$("channel").$("department_id$int").on("value",function(e){e&&(s=e)})},sendChatMsg:function(e,t,n){var i=parseInt(t,10)||parseInt(r.getServerTime().toFixed(0),10),a=i+"",c=o.$("livechat").$("profile"),u=s,l=(e.msg||"")+"";"department"in e&&(u=e.department),o.$("livechat").$("channel").$("log").$(a).write({timestamp$int:i,type$string:"chat.msg",msg$string:l,nick$string:c.$("nick$string").getValue()||"",display_name$string:c.$("display_name$string").getValue()||"",department_id$int:u,unverified$bool:!0,__client$bool:!0},n)},sendFiles:function(e,t){var n=m._validateAndPrepareData(e);if(a(n))return n;var i=function(e,t){var n=parseInt(t,10)||parseInt(r.getServerTime().toFixed(0),10),i=n+"";return o.$("livechat").$("channel").$("log").$(i).write({timestamp$int:n,nick$string:o.$("livechat").$("profile").$("nick$string").getValue()||"",display_name$string:o.$("livechat").$("profile").$("display_name$string").getValue()||"",type$string:"chat.file.upload",file_name$string:e.file_name||"",file_type$string:e.file_type||"",file_size$int:e.file_size||0,unverified$bool:!0,__client$bool:!0}),n}({file_name:n.name,file_type:n.type,file_size:n.size},t),s="https://"+n.host+l.FILE_UPLOAD_PATH,c={ts:i},u={"X-Zopim-MID":n.mid,"X-Zopim-UID":n.uid};m._uploadFiles(n.form_data,s,c,u)},sendFileWithCallback:function(e,t){var n=m._validateAndPrepareData([e]);if(t=u.once(t),a(n))c(function(){t(new window.Error(n))});else{var o=r.registerCallback(function(e){return"ok"!==e.raw.__status?t(new window.Error(i(e.raw.error))):e.raw.data&&"chat.file"===e.raw.data.type?void t(null,f.pick(e.raw.data,["mime_type","name","size","url","metadata"])):t(new window.Error("INTERNAL_ERROR"))}),s="https://"+n.host+l.CALLBACK_FILE_UPLOAD_PATH,d={ts:parseInt(r.getServerTime().toFixed(0),10),__messageID:o,__socketID:r.getSocketID()},h={"X-Zopim-MID":n.mid,"X-Zopim-UID":n.uid},p={error:function(){t(new window.Error("CONN_ERROR"))},load:function(){if(200!==this.status){var e;try{e=JSON.parse(this.responseText)}catch(e){}t(e&&e.error?new window.Error(i(e.error)):new window.Error("INTERNAL_ERROR"))}}};m._uploadFiles(n.form_data,s,d,h,p)}},clearChatDepartmentID:function(){s=void 0},_validateAndPrepareData:function(e){if(!window.FormData)return"NOT_SUPPORTED";var t=o.$("livechat"),n=t.$("settings").$("file_sending"),i=t.$("settings").$("package"),s=n.$("enabled$bool").getValue(),a=(n.$("allowed_extensions$string").getValue()||"").trim().replace(/\s*,\s*/g,",").split(","),c=i.$("color_customization_enabled$int").getValue()||i.$("widget_customization_enabled$int").getValue(),u=t.$("profile").$("mid$string").getValue(),h=t.$("profile").$("uid$string").getValue(),f=r.getHost(),p=new window.FormData,m=[],g=[],_=0;if(!f)return"CONN_ERROR";if(!c)return"INVALID_PLAN";if(!s)return"NOT_ALLOWED";for(var v=0,y=e.length;v<y;v++){if(!d.isValidType(e[v].name,a))return"INVALID_EXTENSION";m.push(e[v].name),g.push(e[v].type),_+=e[v].size||0,p.append("file_"+e[v].name,e[v])}return _>l.FILE_UPLOAD_MAX?"EXCEED_SIZE_LIMIT":{form_data:p,name:m.join(", "),type:g.join(", "),size:_,host:f,mid:u,uid:h}},_uploadFiles:function(e,t,n,i,o){var r=new window.XMLHttpRequest,s=t+(Object.keys(n).length?"?"+h.buildQuery(n):"");if(r.upload){for(var a in r.open("POST",s,!0),i)Object.prototype.hasOwnProperty.call(i,a)&&r.setRequestHeader(a,i[a]);for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&r.addEventListener(c,o[c]);r.send(e)}}};e.exports=m},function(e,t){var n={SECOND:1e3};n.MINUTE=60*n.SECOND,n.HOUR=60*n.MINUTE,n.DAY=24*n.HOUR,n.WEEK=7*n.DAY,e.exports=n},function(e,t,n){function i(e){var t=this,n=this.longpoll=new s(!0),i=this.sender=new s(!0);n.on("success",function(e){t.process_data(e)}),n.on("error",function(){t.abort("longpoll error")}),i.on("success",function(){t.ondrain&&t.ondrain()}),i.on("error",function(){t.abort("sender error")}),this.url="https://"+e,o.window.on("unload",this.unload=function(){t.abort("unload")}),this.longpoll.load(this.url+["c",+new Date].join("/"))}var o=n(0),r=i;i.protocol="xdds";var s=n(18);i.prototype.process_data=function(e){e&&!this._abort&&(!this.ts&&this.onopen&&this.onopen(),this.ts=+new Date,this.onmessage&&this.onmessage(e,this.ts),this.longpoll&&this.longpoll.load(this.url+["p",+new Date].join("/")))},i.prototype.send=function(e){if(this._abort)return!1;var t=this.url+["d",+new Date,window.encodeURIComponent(e)].join("/");return this.sender&&this.sender.load(t),!1},i.prototype.abort=function(e){this._abort||(this._abort=!0,a("XDDS - abort: "+e),o.window.un("unload",this.unload),this.longpoll.destroy(),this.sender.destroy(),this.longpoll=this.sender=this.unload=null,this.onclose&&this.onclose(e),window.CollectGarbage&&window.CollectGarbage())};var a=function(){};e.exports=r},function(e,t){function n(e){var t,n=this;try{t=new i("wss://"+e+["c",+new Date].join("/"))}catch(e){}t&&(t.onclose=function(e){n.onclose&&n.onclose(e)},t.onerror=function(e){n.onerror&&n.onerror(e)},t.onmessage=function(e){n.onmessage&&n.onmessage(e.data,+new Date)},t.onopen=function(e){n.onopen&&n.onopen(e)},this.ws=t)}var i=window.WebSocket||window.MozWebSocket,o=i?n:null;n.prototype.abort=function(){if(this.ws&&!this._aborted){this._aborted=!0;var e=this.ws;e.readyState==i.CONNECTING?e.onopen=function(){e.close()}:e.close()}},n.prototype.send=function(e){return this.ws&&this.ws.send(e),!0},n.protocol="ws",e.exports=o},function(e,t,n){function i(e){function t(e){!o&&r.onopen&&r.onopen(),o=+new Date,e.origin==i&&("event-stream"==e.data?a.onload=null:r.onmessage&&r.onmessage(e.data,o))}var n,i,o,r=this,a=this.iframe=function(e){var t=document.createElement(e),n=t.style;return n.position="absolute",n.width=n.height=0,n.overflow="hidden",t}("iframe");this.url="https://"+e,a.src=this.src=n=this.url+["c",+new Date].join("/"),i=n.match(/https?:\/\/[^\/]+/)[0],a.onload=function(e){r.abort(e)},document.body.insertBefore(a,document.body.firstChild),s("SPM connecting to: "+this.url),window.addEventListener("message",t,!1),this.remove_listeners=function(){window.removeEventListener("message",t,!1)}}var o=n(2),r=window.postMessage?!o.isAndroid&&i:null;i.protocol="spm",i.prototype.send=function(e){return this.iframe.contentWindow.postMessage(e,this.src),!0},i.prototype.abort=function(e){this._abort||(this._abort=!0,s(e),this.iframe&&document.body.removeChild(this.iframe),this.onclose&&this.onclose(e),this.remove_listeners(),this.iframe=this.remove_listeners=null)};var s=function(){};e.exports=r},function(e,t,n){function i(e){function t(e){c("extracting data"),!n&&s.onopen&&s.onopen(),n=e,u+=i.responseText.substr(l),l=i.responseText.length,u=u.split("\n\n");for(var t=0;t<u.length-1;t++)s.onmessage&&s.onmessage(u[t],n);u=u[u.length-1],(l>1048576&&!u.length||l>4194304)&&s.abort()}var n,i=this.xhr=new r,s=this,u="",l=0;this.url=a+e,i.open("GET",this.url+["c",+new Date].join("/"),!0),i.onerror=function(e){s.abort(e)},o.isIE?(i.onprogress=function(){t(+new Date)},i.onload=function(){s.abort("close")}):i.onreadystatechange=function(){switch(i.readyState){case 3:t(+new Date);break;case 4:s.abort("close")}},c("CXHR connecting to: "+this.url),i.send()}var o=n(2),r=o.isIE?window.XDomainRequest:!o.isOpera&&!o.isAndroid&&window.XMLHttpRequest,s=r?i:null,a=o.isIE?"//":"https://";i.protocol="cxhr",i.prototype.send=function(e){function t(){c.abort("send failed")}function n(){c.xhr_sender=null,clearTimeout(i),c.ondrain&&c.ondrain()}var i,s=this.url+["d",+new Date].join("/"),a=new r,c=this;return a.open("POST",s,!0),a.send(e),o.isIE?(a.onerror=t,a.onload=n):a.onreadystatechange=function(){4==a.readyState&&(200!=a.status&&t(),n())},i=setTimeout(t,5e3),this.xhr_sender=a,!1},i.prototype.abort=function(e){this._abort||(this._abort=!0,c(e),this.xhr&&this.xhr.abort(),this.xhr_sender&&this.xhr_sender.abort(),this.onclose&&this.onclose(e),this.onerror=this.onload=this.onprogress=this.onreadystatechange=this.xhr=this.xhr_sender=null)};var c=function(){};e.exports=s},function(e,t,n){function i(e,t,n,o){for(var r in this.options=o=o||{},g)r in o||(o[r]=g[r]);if(!p&&!o.PREFERRED_PROVIDER)throw"No available transports";c.extend(this),this.provider=o.PREFERRED_PROVIDER||p,this.id=n||i.generateID(),this.host=e,this.ns=t,this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.status=window.navigator&&!1===window.navigator.onLine?"offline":"connecting",this.connected=!1,this.quality=0,this.rtt=o.INITIAL_RTT,this.clock_skew=0,this.connect_attempts=0,this.connections=0,this.disconnects=0,this.sent_bytes=0,this.recv_bytes=0,this.sent_messages=0,this.recv_messages=0,this.sent_frames=0,this.recv_frames=0,this.lost_frames=0,this.ooo_frames=0,this.remote_seq=0,this.local_seq=0,this.timeout_server=0,this.timeout_response_soft=0,this.timeout_response_hard=0,this.bytes_at_connect=-1,this.time_last_alive=-1,this.time_last_open=-1,this.starttime=Date.now(),this.uptime=0,this.connected_time=new s,this.idle_time=new s,this.last_frame_time=0,this.raw_clock_skew=0,this.smooth_skewed_transit_time_in=0,this.remote_smooth_skewed_transit_time_out=0,this.cur_conn_recv_messages=0,this.drained=!0,this.buffer=[],this.glitch_timer=this.reconnect_timer=null,this.reconnect_delay=o.RECONNECT_DELAY_MS*(.2*Math.random()+.8),this.keep_alive_interval=15e3,this.data_packet_queue=new a(this);var u=this;this.onoffline=function(){i.prototype.onoffline.call(u)},this.ononline=function(){i.prototype.ononline.call(u)},c.window.on("offline",this.onoffline),c.window.on("online",this.ononline),"connecting"===this.status&&this.connect()}function o(e){for(var t="",n=y;e-- >0;)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function r(e,t,n){return Math.min(n,Math.max(t,e))}function s(){this.count=0,this.sum=0,this.sq_sum=0,this.mean=0,this.stddev=0}function a(e){this.socket=e,this.queue=[],this.curFrame=null,this.curIdx=0,this.last_work_finished_time=0,this.work_timer=null,this.processing=!1}var c=n(0),u=n(10),l=n(34),d=n(33),h=n(32),f=n(31),p=h||l||d||f,m=f,g={INITIAL_RTT:1e3,RECONNECT_DELAY_MS:3e4,FAST_RECONNECT_MS:100,FLUSH_DELAY_MS:75,MAX_BLOCKING_TIME_MS:40,MAX_NO_WORK_TIME_MS:15,PREFERRED_PROVIDER:void 0};i.providers={},[l,d,h,f].forEach(function(e){e&&(i.providers[e.protocol]=e)}),i.available=function(){return!!p},i.generateID=function(){return o(16)},i.prototype.connect=function(e){if(this.debug("connect("+(e?"glitch":"")+")"),!this.reconnect_timer){var t=this,n=this.options,i=!this.connections||!this.cur_conn_recv_messages;!n.PREFERRED_PROVIDER&&i&&(this.provider=1&this.connect_attempts?m:p),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("connect"),this.socket=null),this.connected=!1,this.cur_conn_recv_messages=0,e&&(this.reconnect_delay=n.RECONNECT_DELAY_MS*(.2*Math.random()+.9),this.glitch_timer=setTimeout(function(){t.quality=0,t.glitch_timer=setTimeout(function(){t.status="reconnecting",t.fire_break()},r(3*t.rtt,1e3,5e3))},r(3*this.rtt,1e3,5e3))),this.debug("reconnect_delay: "+this.reconnect_delay),clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout(function(){t.reconnect_timer=null,t.reconnect_delay=Math.min(1.4*t.reconnect_delay+1e3,6e4),t.reconnect_delay*=.2*Math.random()+.9,t.connect()},this.reconnect_delay),this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.debug("connecting: "+this.url),this.socket=new this.provider(this.url),this.transport=this.provider.protocol,this.connect_attempts++,this.socket.onopen=function(){t.status="connected",t.glitch_timer=clearTimeout(t.glitch_timer),t.reconnect_timer=clearTimeout(t.reconnect_timer),t.connections++,t.drained=!0,t.connected=!0,t.time_last_open=t.time_last_alive=Date.now(),t.uptime>=0&&(t.uptime-=t.time_last_open),1==t.connections?t.fire("open"):t.fire_resume(),t.flush(),t.keep_alive(),t.debug("connected"),-1==t.bytes_at_connect&&setTimeout(function(){t.bytes_at_connect=t.recv_bytes},50)},this.socket.onmessage=function(e,n){t.onmessage(e,n)},this.socket.onclose=function(e){t._onclose(e)},this.socket.ondrain=function(e){t._ondrain(e)},this.socket.onerror=function(e){t._onerror(e)}}},i.prototype.reconnect=function(){this.reconnect_timer=clearTimeout(this.reconnect_timer),this.broken_reason="FORCED_RECONNECT",this.connect()},i.prototype.send=function(e,t){"disconnected"!=this.status&&("null"==this.buffer[0]&&(this.buffer=[]),this.buffer.push(u.stringify(e)),this.schedule_flush(),t&&this.response_timeout())},i.prototype.close=function(e){this.debug("close()"),this.flush_scheduled=clearTimeout(this.flush_scheduled),this.keep_alive_timer=clearTimeout(this.keep_alive_timer),this.reconnect_timer=clearTimeout(this.reconnect_timer),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.broken_reason||(this.broken_reason="CLOSE"),this.fire_break(),this.status=e?"reconnecting":"disconnected",this.connected=!1,this.quality=0,this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("close"),this.socket=null,e||(c.window.un("offline",this.onoffline),c.window.un("online",this.ononline)))},i.prototype.hibernate=function(){},i.prototype.onoffline=function(){this.debug("onoffline"),this.broken_reason="OFFLINE",this.close(!0)},i.prototype.ononline=function(){this.debug("ononline"),"disconnected"==this.status||this.connected||(this.reconnect_timer=clearTimeout(this.reconnect_timer),this.connect())},i.prototype.schedule_flush=function(){if("disconnected"!=this.status&&!this.flush_scheduled&&this.drained&&this.connected){var e=this,t=this.options;this.flush_scheduled=setTimeout(function(){e.flush()},t.FLUSH_DELAY_MS)}},i.prototype.flush=function(){if("disconnected"!=this.status&&this.buffer.length&&this.drained&&this.connected){var e=this.buffer;this.sent_messages+=e.length,this.sent_frames++,e=this.generate_frame(e.join("\n")),this.drained=this.socket.send(e),this.sent_bytes+=e.length,this.flush_scheduled=clearTimeout(this.flush_scheduled),this.buffer=[],this.keep_alive(),this.time_last_alive=Date.now()}},i.prototype.keep_alive=function(){if("disconnected"!=this.status){clearTimeout(this.keep_alive_timer);var e=this;this.keep_alive_timer=setTimeout(function(){e.debug("pong!"),e.send(null)},this.keep_alive_interval)}},i.prototype.response_timeout=function(){if(!this.response_timer){var e=this,t=r(4*this.rtt+this.options.FLUSH_DELAY_MS,2e3,2e4);this.response_timer=setTimeout(function(){e.timeout_response_soft++,e.debug("response timeout, "+t+"ms"),e.fire_break("SOFT_RESPONSE_TIMEOUT"),e.response_timer=setTimeout(function(){e.timeout_response_hard++,e.debug("response timeout - reconnecting"),e.broken_reason="HARD_RESPONSE_TIMEOUT",e.connect(!0)},2*t)},t)}},i.prototype.reset_server_timeout=function(){clearTimeout(this.timeout_timer);var e=this,t=4*this.keep_alive_interval+r(4*e.rtt,2e3,2e4);this.timeout_timer=setTimeout(function(){e.timeout_server++,e.debug("server "+t+"ms timeout, reconnecting"),e.broken_reason="SERVER_TIMEOUT",e.connect(!0)},t)},i.prototype.fire_break=function(e){this.broken||this.fire("break",e||this.broken_reason),this.broken=!0,this.broken_reason="",this.uptime<0&&(this.uptime+=Date.now())},i.prototype.fire_resume=function(){this.broken_reason="",this.broken&&this.fire("resume"),this.broken=!1,this.uptime>=0&&(this.uptime-=Date.now())},i.prototype.onmessage=function(e,t){if(this.recv_bytes+=e.length,(e=e.split("\n")).length<6)this.debug("Bad data: "+e.join("\n"));else{var n=Date.now(),i=+e[0],o=+e[1],r=+e[2],s=(e[3],e[4]);switch(this.calculate_clocks(t||Date.now(),i,o),this.reset_server_timeout(),s){case"a":this.broken_reason="ABORT",this.close();break;case"d":this.response_timer=clearTimeout(this.response_timer),this.fire_resume(),this.check_sequence(r),this.data_packet_queue.queueFrame(e,5,n);break;case"e":this.debug("server: Are you still there?"),this.send(null),this.flush();break;case"n":this.remote_seq=r,this.keep_alive_interval=+e[5]||15e3,this.debug("keep_alive is "+this.keep_alive_interval+"ms"),this.reset_server_timeout(),this.connections>1&&this.fire("reopen");break;case"p":this.debug("ping!")}}},i.prototype._onclose=function(){var e=this,t=this.options;0==this.connections&&0==this.disconnects&&this.fire("close"),this.debug("_onclose"),this.disconnects++,this.broken_reason="HANGUP",this.connected?(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout(function(){e.reconnect_timer=null,e.connect(!0)},t.FAST_RECONNECT_MS)):this.connections||1!=this.connect_attempts||(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout(function(){e.reconnect_timer=null,e.connect()},0)),this.connected=!1,clearTimeout(this.keep_alive_timer),this.time_last_alive>0&&this.idle_time.add(Date.now()-this.time_last_alive),this.time_last_open>0&&this.connected_time.add(Date.now()-this.time_last_open),this.time_last_alive=this.time_last_open=-1,this.uptime<0&&(this.uptime+=Date.now())},i.prototype._ondrain=function(){this.drained=!0,this.flush()},i.prototype._onerror=function(e){this.debug("_error"),this.fire("error",e)},i.prototype.generate_frame=function(e,t){return[Date.now(),this.smooth_skewed_transit_time_in,++this.local_seq,this.remote_seq,t||"d",e].join("\n")};var _=Math.pow(50,.1),v=Math.pow(1e3,.1)-_;i.prototype.calculate_clocks=function(e,t,n){var i=e-t,o=1/(Math.max(0,e-this.last_frame_time)/45e3+1);this.smooth_skewed_transit_time_in?this.smooth_skewed_transit_time_in=o*this.smooth_skewed_transit_time_in+(1-o)*i:this.smooth_skewed_transit_time_in=i,this.remote_smooth_skewed_transit_time_out=n,this.smooth_skewed_transit_time_in&&this.remote_smooth_skewed_transit_time_out&&(this.rtt=this.smooth_skewed_transit_time_in+this.remote_smooth_skewed_transit_time_out,this.quality=~~(100*(1-(Math.pow(this.rtt,.1)-_)/v)),this.quality=Math.min(100,Math.max(0,this.quality)),this.raw_clock_skew=i-this.rtt/2,this.clock_skew?this.clock_skew=.9*this.clock_skew+.1*this.raw_clock_skew:this.clock_skew=this.raw_clock_skew),this.time_last_alive=this.last_frame_time=e},i.prototype.check_sequence=function(e){if(this.remote_seq+1==e)this.remote_seq=e;else if(this.remote_seq<e){var t=e-this.remote_seq+1;this.lost_frames+=t,this.fire("lost",t),this.remote_seq=e}else this.ooo_frames++,this.fire("out_of_order")},p&&(i.prototype.transport=p.protocol),i.prototype.debug=function(){};var y="+-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";i.genDate=function(){var e=y,t=new Date,n=t.getUTCFullYear()-2e3,i=t.getUTCMonth()+1,o=t.getUTCDate(),r=t.getUTCHours(),s=t.getUTCMinutes(),a=t.getUTCSeconds(),c=t.getUTCMilliseconds();return e[n]+e[i]+e[o]+e[r]+e[s]+e[a]+e[c>>6]+e[63&c]},i.genID=o,s.prototype.add=function(e){this.count++,this.sum+=e,this.sq_sum+=e*e,this.mean=this.sum/this.count,this.stddev=Math.sqrt(this.sq_sum/this.count-this.mean*this.mean)};var w=a.prototype;w.queueFrame=function(e,t,n){this.queue.push({msgs:e,start_idx:t,receive_time:n}),this.process()},w.process=function(){var e=Date.now()-this.last_work_finished_time;this.processing&&e<this.socket.options.MAX_NO_WORK_TIME_MS||(this.work_timer=window.clearTimeout(this.work_timer),this.processing=!0,this.work())},w.work=function(){for(var e,t,n,i=Date.now()+this.socket.options.MAX_BLOCKING_TIME_MS,o=!1,r=this.socket.recv_frames,s=this,a=0;a<this.queue.length;a++){"start_time"in(e=this.queue[a])||(e.start_time=Date.now(),e.ticks=0,e.idx=e.start_idx),e.ticks++,n=(t=e.msgs).length;for(;e.idx<n;){var c,l=Date.now();if(l>i){o=!0;break}this.socket.dispatch_delay=l-e.receive_time;try{c=u.parse(t[e.idx]),e.idx++}catch(n){this.socket.debug("Invalid json message: "+t[e.idx]);continue}this.socket.fire("message",c),this.socket.recv_messages++,this.socket.cur_conn_recv_messages++}if(e.idx>=n&&this.socket.recv_frames++,o)break}this.queue.splice(0,this.socket.recv_frames-r),this.queue.length?this.work_timer=window.setTimeout(function(){s.work()},0):this.processing=!1,this.last_work_finished_time=Date.now()},e.exports=i},function(e,t){var n={getServerTime:function(e){return Date.now()-(e?e.clock_skew:0)},getConnectionStats:function(e){return e?{connect_attempts:e.connect_attempts,connections:e.connections,disconnects:e.disconnects,timeout_server:e.timeout_server,timeout_response_soft:e.timeout_response_soft,timeout_response_hard:e.timeout_response_hard,sent_bytes:e.sent_bytes,recv_bytes:e.recv_bytes,sent_messages:e.sent_messages,recv_messages:e.recv_messages,sent_frames:e.sent_frames,recv_frames:e.recv_frames,lost_frames:e.lost_frames,ooo_frames:e.ooo_frames,bytes_at_connect:e.bytes_at_connect,rtt:e.rtt,clock_skew:e.clock_skew,reconnect_delay:e.reconnect_delay,quality:e.quality,host:e.host,status:e.status,last_frame_time:e.last_frame_time,local_time:Date.now()}:{status:"not connected"}}};e.exports=n},function(e,t,n){function i(e){return function(){try{var t=Array.prototype.slice.call(arguments,0);t.unshift(r),d.appendChild(r),r.addBehavior("#default#userData"),r.load(l);var n=e.apply(a,t);return d.removeChild(r),n}catch(e){}}}function o(e){return e.replace(f,"___")}var r,s=n(10),a={},c=window,u=c.document,l="localStorage";if(a.disabled=!1,a.set=function(){},a.get=function(){},a.remove=function(){},a.clear=function(){},a.transact=function(e,t,n){var i=a.get(e);null==n&&(n=t,t=null),void 0===i&&(i=t||{}),n(i),a.set(e,i)},a.getAll=function(){},a.serialize=function(e){return s.stringify(e)},a.deserialize=function(e){if("string"==typeof e)try{return s.parse(e)}catch(t){return e||void 0}},function(){try{return l in c&&c[l]}catch(e){return!1}}())r=c[l],a.set=function(e,t){return void 0===t?a.remove(e):(r.setItem(e,a.serialize(t)),t)},a.get=function(e){return a.deserialize(r.getItem(e))},a.remove=function(e){r.removeItem(e)},a.clear=function(){r.clear()},a.getAll=function(){for(var e={},t=0;t<r.length;++t){var n=r.key(t);e[n]=a.get(n)}return e};else if(u.documentElement.addBehavior){var d,h;try{(h=new window.ActiveXObject("htmlfile")).open(),h.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),h.close(),d=h.w.frames[0].document,r=d.createElement("div")}catch(e){r=u.createElement("div"),d=u.body}var f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");a.set=i(function(e,t,n){return t=o(t),void 0===n?a.remove(t):(e.setAttribute(t,a.serialize(n)),e.save(l),n)}),a.get=i(function(e,t){return t=o(t),a.deserialize(e.getAttribute(t))}),a.remove=i(function(e,t){t=o(t),e.removeAttribute(t),e.save(l)}),a.clear=i(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(l);for(var n,i=0;n=t[i];i++)e.removeAttribute(n.name);e.save(l)}),a.getAll=i(function(e){for(var t,n=e.XMLDocument.documentElement.attributes,i={},r=0;t=n[r];++r){var s=o(t.name);i[t.name]=a.deserialize(e.getAttribute(s))}return i})}try{a.set("__storejs__","__storejs__"),"__storejs__"!=a.get("__storejs__")&&(a.disabled=!0),a.remove("__storejs__")}catch(e){a.disabled=!0}a.enabled=!a.disabled;var p=a;e.exports=p},function(e,t){e.exports=function(e){return!!e&&"false"!=e}},function(e,t,n){function i(){"prerender"!=document.visibilityState&&(document.removeEventListener("visibilitychange",i),ue.connect())}function o(e){if((ie="reattached"==e)&&(A.update({client_reattached_timestamp$int:+new Date}),w()),ie&&!1===k&&R&&x.$("livechat").$("profile").write({disconnect_timeout$int:b(R.rtt)}),"idle_disconnect"==e||"shutdown"==e||"error"==e){var t=x.$("livechat").$("account").$("status$string").getValue(),n=x.$("connection").$("backoff"),i=n.$("active$int").getValue()||0,o=n.$("max_seconds$int").getValue();"invalid_account_key"==t?Q.warnBadEmbed():"widget_v2"==q&&"shutdown"==e&&i&&o&&function(e){window.clearTimeout(ue.reconnectTimer),ue.reconnectTimer=window.setTimeout(function(){ue.reconnect()},1e3*e)}(o),u()}_()}function r(e){e&&(U()||Y.IS_POPOUT||e.mid$string&&X.setIdentity(e.mid$string))}function s(e){P=!0===e}function a(e){(j=!1!==e)&&(se=!1,function(){for(var e=0,t=re.length;e<t;e++){var n=re[e];W(n)&&n()}re=[]}())}function c(e){R&&R.send(e)}function u(e){R&&R.close(),T=!e,R=null}function l(e){e&&ue.reconnect()}function d(){C||(A.update({socket_open_timestamp$int:+new Date,socket_status$string:null,disconnection_status$string:null}),g())}function h(e){if(e){if(e.raw&&e.raw.__messageID in ce){var t=ce[e.raw.__messageID];delete ce[e.raw.__messageID],t(e)}var n=x;if("update"in e){var i=Q.getValueByReference(e,"livechat.account");i&&(D.$("account").update(i),Q.fullyExtend(i,S.getValue("account")));var o=Q.getValueByReference(e,"livechat.settings");o&&(D.$("settings").update(o),Q.fullyExtend(o,S.getValue("settings")));var r=Q.getValueByReference(e,"livechat.profile.mid$string");r&&r!==X.getIdentity()&&(x.$("livechat").$("channel").update(null),x.$("livechat").$("profile").update(null),x.$("livechat").$("ui").$("chat_button").$("unread_count$int").update(0)),e.path&&(n=n.descend(e.path)),n.update(e.update),ue.fire("message",e)}}}function f(){A.update({socket_status$string:"break"})}function p(){A.update({socket_resume_timestamp$int:+new Date,socket_status$string:"resume"})}function m(){A.update({socket_open_timestamp$int:+new Date,socket_status$string:"reconnect"}),ie=!1,g()}function g(){if(Y.ACCOUNT_KEY){var e=function(){var e=X.getIdentity(),t=U(),n=x.$("livechat").$("ui").getValue("mobile$bool")?"mobile":"desktop",i=x.$("livechat").$("settings").$("theme").getValue("name$string"),o={__type:"register",accountKey:Y.ACCOUNT_KEY,mID:e,ua:O.navigator.userAgent,dt:n,theme:i,cookie_law:t,rev:H.git_commit,source:q,source_ver:z,country_code:Y.COUNTRY_CODE,multisession:!0,gd_compatible:K};x.$("livechat").$("ui").$("popout$bool").getValue()?o.popout=!0:(o.title=L.title,o.url=O.location.href,o.ref=O.document.referrer);var r=ue._register;if(r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(o[s]=r[s]);return o}();Z.retrieveIDToken(function(t,n){t?$():(n&&(delete e.mID,e.idt=n),c(e))})}}function _(){var e=A.getValue("status$string"),t=A.getValue("socket_status$string");if(window.clearTimeout(v.timer),"error"!=e)if("break"==t)"idle_disconnect"==e?A.update({message$string:"idle_disconnect"}):(A.update({message$string:"reconnecting"}),v.timer=window.setTimeout(v,6e4));else if(null===t&&"registered"==e)A.update({message$string:"resuming"});else if(B(e)&&B(t)){var n=N.getValue()?"fast_init":"first_init";A.update({message$string:n})}else A.update({message$string:null});else v.timer=window.setTimeout(v,5e3)}function v(){A.update({message$string:"disconnected"})}function y(e){return ce[ae+=1]=e,ae}function w(e){if(e){var t={};t.path=e.path,t.value=e.value,W(e.func)&&(t.__messageID=y(e.func)),oe.push(t)}if(R&&ie)for(;oe.length;)R.send(oe.shift())}function b(e){var t,n=10*te.SECOND,i=1*te.SECOND,o=120*te.SECOND,r=20*te.SECOND;return e=Math.round(e)||0,t=r+((e=Math.max(i,Math.min(e,n)))-i)/(n-i)*(o-r),Math.floor(t/1e3)}function $(){A.update({disconnection_status$string:"disconnecting"}),u(),v.timer=clearTimeout(v.timer),A.update({disconnection_status$string:"disconnected"})}function E(){V.unbindValue(a),M.unbindValue(s),x.$("livechat").$("profile").unbindValue(r),A.$("status$string").unbindValue(o),A.$("socket_status$string").unbindValue(_),A.$("reconnect$bool").unbindValue(l),$(),ie=!1,oe=[],re=[],se=!1,ae=0,ce={},k=T=x=A=R=C=S=D=N=M=P=V=j=U=q=z=K=F=null}var k,T,O,L,x,A,R,I,C,S,D,N,M,P,V,j,U,q,z,K,F,W=n(5),H=n(4),B=n(1),G=n(0),Y=n(3),X=n(14),Z=n(13),Q=n(6),J=n(36),ee=n(35),te=n(30),ne={FLUSH_DELAY_MS:0,RECONNECT_DELAY_MS:1e4},ie=!1,oe=[],re=[],se=!1,ae=0,ce={},ue=G.extend({init:function(e){U=e.isCookieDenied,I=Y.getMediatorHost(e.overrideProxy),q=e.source,z=e.source_ver,K=e.gd_compatible,O=e.activity_window||window,L=O.document,x=e.root,S=x.$("tmp").$("api_settings"),D=x.$("tmp").$("server_settings"),N=x.$("livechat").$("settings").$("cached$bool"),A=x.$("connection"),M=A.$("server_retired$bool"),(V=A.$("server_ready$bool")).bindValue(a),M.bindValue(s),(C=x.$("livechat").$("ui").$("mockup$bool").getValue())?A.$("status$string").update("reattached"):(x.$("livechat").$("profile").bindValue(r),A.$("status$string").bindValue(o),A.$("socket_status$string").bindValue(_),x.bindWrite(w),A.$("reconnect$bool").bindValue(l),window.__z_sdk?k=!0:(k=!1,"visibilityState"in document&&"prerender"==document.visibilityState?document.addEventListener("visibilitychange",i):ue.connect()))},send:c,connect:function(){var e;R||T||(e=I,(R=F||new ee(e,"W",null,ne)).on("break",f),R.on("message",h),R.on("reopen",m),R.on("resume",p),R.on("open",d))},reconnect:function(){window.clearTimeout(ue.reconnectTimer),u(!0),ue.connect()},clientDisconnect:$,destroy:E,disconnect:function(){A.update({status$string:"idle_disconnect"})},getConnectionStats:function(){return J.getConnectionStats(R)},getHost:function(){return I},getServerTime:function(){return J.getServerTime(R)},getServerSettings:function(e){return e?D.getValue(e):D.getValue()},reconnectIfServerRetired:function(e){!j||P?(A.update({server_ready$bool:!1}),re.push(e),se||(se=!0,R.reconnect())):e()},registerCallback:y,getSocketID:function(){return R?R.id:null},getDCTimeoutValue:b,setSocket:function(e){F=e},reset:E});e.exports=ue},function(e,t,n){var i=n(15),o={QUICK_REPLIES:"QUICK_REPLIES",BUTTON_TEMPLATE:"BUTTON_TEMPLATE",PANEL_TEMPLATE:"PANEL_TEMPLATE",PANEL_TEMPLATE_CAROUSEL:"PANEL_TEMPLATE_CAROUSEL",LIST_TEMPLATE:"LIST_TEMPLATE"},r="QUICK_REPLY_ACTION",s="LINK_ACTION",a=i.obj({text:i.type("string"),action:i.obj({type:i.any([i.equal(r),i.equal(s)]),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}),c=i.obj({type:i.equal(o.PANEL_TEMPLATE),panel:i.obj({heading:i.type("string"),paragraph:i.type("string"),image_url:i.type("string"),action:i.obj({type:i.equal(s),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading"],whitelistedKeysOnly:!0}),buttons:i.each(a)},{requiredKeys:["type","panel"],whitelistedKeysOnly:!0}),u={QUICK_REPLIES:i.obj({type:i.equal(o.QUICK_REPLIES),msg:i.type("string"),quick_replies:i.each(i.obj({text:i.type("string"),action:i.obj({type:i.equal(r),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}))},{requiredKeys:["type","msg","quick_replies"],whitelistedKeysOnly:!0}),BUTTON_TEMPLATE:i.obj({type:i.equal(o.BUTTON_TEMPLATE),msg:i.type("string"),buttons:i.each(a)},{requiredKeys:["type","msg","buttons"],whitelistedKeysOnly:!0}),PANEL_TEMPLATE:c,PANEL_TEMPLATE_CAROUSEL:i.obj({type:i.equal(o.PANEL_TEMPLATE_CAROUSEL),items:i.each(c).minLength(2).maxLength(10)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0}),LIST_TEMPLATE:i.obj({type:i.equal(o.LIST_TEMPLATE),items:i.each(i.obj({heading:i.type("string"),paragraph:i.type("string"),image_url:i.type("string"),action:i.obj({type:i.equal(s),value:i.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading","paragraph","action"],whitelistedKeysOnly:!0})),buttons:i.each(a)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0})},l={validate:function(e){var t=e.type,n=u[t];if(!n)return t?new Error(t+" type is not supported. Please upgrade the Web SDK version."):new Error('Structured message object should contain "type" property');var i=n(e);if(i){var o=i.paths&&"type"===i.paths.pop()&&i.actual?i.actual+" type is not supported. Please upgrade the Web SDK version.":i.message;return new Error(o)}},STRUCTURED_MSG_VALIDATOR:u,STRUCTURED_MSG_TYPE:o};e.exports=l},function(e,t,n){var i=n(22),o=n(5),r={rateLimit:function(e,t){if(!i(t.interval)||!i(t.limit))throw new Error("requires numeric interval and limit");if(t.callback&&!o(t.callback))throw new Error("requires callback to be a function");return function(){var n=Date.now();if(t.start>n-t.interval){if(t.count||(t.count=0),t.count++,t.count>t.limit)return void(t.callback&&t.callback())}else t.start=n,t.count=1;return e.apply(this,arguments)}}};e.exports=r},function(e,t,n){function i(e,t,n){var i=this;o.extend(i);var s=new r;t=t||{},s.setScope(t),s.on("success",n),s.on("error",function(e){i.onError(e)}),s.load(e)}var o=n(0),r=n(18);i.prototype.onError=function(e){},e.exports=i},function(e,t,n){function i(){var e=Array.prototype.slice.call(arguments),t=e.shift();this.fqname=t,this.name=t.split(".").pop(),this.callbacks=[],this.dependencies=e,c.push(this)}function o(e){e()}var r=n(19),s=n(4),a=n(42),c=[],u=/^function *\( *\) *{ *([\s\S]*) *}$/;i.ensureLoaded=function(e,t){e instanceof i?e.ensureLoaded(t):t()},i.prototype.ensureLoaded=function(e){this.ifLoaded(e),this.load()},i.prototype.ifLoaded=function(e){this.callbacks.push(e)},i.prototype.load=function(){function e(e){!function(e,t){var n=r[e];n.module_function=new Function("$Modules",t.toString().replace(u,"$1")),n.ready()}(e[0],e[1])}var t,n,i=this.getDependencies();for(t=0;t<i.length;t++)(n=i[t]).loader||(n.loader=new a(s.baseURL+"/lib/"+s.build_number+"/"+n.fqname+".js",r,e))},i.prototype.getDependencies=function(){var e,t=this.dependencies,n=[this];for(e=0;e<t.length;e++){var i=r[t[e]];n=n.concat(i.getDependencies())}return n},i.prototype.ready=function(){if(!this.dependencies.length&&this.module_function){for(e=c.length-1;e>=0;e--)if(c[e]==this){c.splice(e,1);break}this.module_function(r);var e,t=r[this.fqname];for(t.ifLoaded=t.ensureLoaded=o,e=0;e<this.callbacks.length;e++)this.callbacks[e](t);!function(e){var t,n,i,o;for(t=c.length-1;t>=0;t--){for(n=(o=(i=c[t]).dependencies).length-1;n>=0;n--)if(o[n]==e){o.splice(n,1);break}i.ready()}}(this.fqname),delete this.callbacks,delete this.fqname,delete this.name,delete this.dependencies,delete this.loader}},r.Module=i,e.exports=i},function(e,t){var n={getVariable:function(e){return window[e]}};e.exports=n},function(e,t,n){var i=n(44);e.exports=function(){var e=i.getVariable("navigator"),t=e.userAgent||"",n=e.vendor||"",o=t||n||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))}},function(e,t,n){function i(e,t){if(r(t)){if(t.length===e.length)return t.concat();throw new window.Error("Invalid weights array: length does not match")}if(s(t))return o(e,t);throw new window.Error("Invalid weights supplied")}function o(e,t,n){var i,o,a;if(!r(e))throw new TypeError(" arr is not an array");var c=Object(e),u=c.length>>>0;if(!s(t))throw new TypeError(t+" is not a function");for(arguments.length>2&&(i=n),o=new Array(u),a=0;a<u;){var l,d;a in c&&(l=c[a],d=t.call(i,l,a,c),o[a]=d),a++}return o}var r=n(7),s=n(5),a={shuffle:function(e,t){return t?function(e,t){var n,o,r,s,a,c=e.concat();for(t=i(e,t),e.length=0,a=0,n=t.length;n--;)a+=t[n];for(r=Math.random()*a,s=0,n=0;c.length;)s+=t[n],r<=s?(a-=t[n],o=c.splice(n,1)[0],t.splice(n,1),e.push(o),r=Math.random()*a,s=0,n=0):n++;return e}(e,t):function(e){for(var t,n,i=e.length;i>1;)t=Math.floor(i--*Math.random()),n=e[t],e[t]=e[i],e[i]=n;return e}(e)},random_index:function(e,t){if(!e||e.length<=0)return-1;if(!t)return Math.floor(Math.random()*e.length);var n,o=0;for(n=(t=i(e,t)).length;n--;)o+=t[n];var r=Math.random()*o,s=0,a=t.length;for(n=0;n<a-1;n++)if(r<=(s+=t[n]))return n;return n},map:o};e.exports=a},function(e,t){function n(e,t){this.name=e,this.leaf=/\$[a-z]+$/.test(e),this.parentNode=t,this.leaf||(this.deleted=!1,this.childNodes={},this.keys={})}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.prototype.fqname=function(){return function(e){for(var t="",n=0;n<e.length;n++)/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(e[n])?t+="."+e[n]:t+="["+JSON.stringify(e[n])+"]";return t.substr(1)}(this.path())},n.prototype.path=function(){for(var e=this,t=[this.name];e=e.parentNode;)t.unshift(e.name);return t},n.prototype._getOrCreateChildNode=function(e){var t;return i(this.childNodes,e)?t=this.childNodes[e]:(t=new n(e,this),this.childNodes[e]=t,this.deleted&&t.undeleteParents()),t},n.prototype.descend=function(e){var t,n,i=this;for("string"==typeof e&&(e=e.split(".")),t=0,n=e.length;t<n;t++)i=i._getOrCreateChildNode(e[t]);return i},n.prototype.$$=n.prototype.descend,n.prototype.$=function(e,t,n,i,o,r,s,a,c){var u=this._getOrCreateChildNode(e);return t?u.$(t,n,i,o,r,s,a,c):u},n.prototype.update=function(e,t){var n,i,o,r,s;if(null!=e&&this.undeleteParents(),this.leaf)this.value!==e&&(this.value=e,r=!0,this.notifyListeners(e,t));else if(null==e){if(!this.deleted){for(n in r=null,this.deleted=!0,this.childNodes)this.childNodes[n].update(null,!0);this.notifyListeners(r,t)}}else{if(this.deleted)for(n in this.deleted=!1,r=e,e)this.$(n).update(e[n],!0);else for(n in e)o=this.$(n),i=e[n],o.leaf?o.update(i,!0)&&(r||(r={}),r[n]=i):void 0!==(s=o.update(i,!0))&&(r||(r={}),r[n]=s);r&&this.notifyListeners(r,t)}return r},n.prototype.replace=function(e,t){var n,o,r,s,a;if(null!=e&&this.undeleteParents(),this.leaf)this.value!==e&&(this.value=e,s=!0,this.notifyListeners(e,t));else if(null==e){if(!this.deleted){for(n in s=null,this.deleted=!0,this.childNodes)this.childNodes[n].replace(null,!0);this.notifyListeners(s,t)}}else{if(this.deleted)for(n in this.deleted=!1,s=e,e)this.$(n).replace(e[n],!0);else{for(n in this.childNodes)i(e,n)||((r=this.childNodes[n]).leaf?r.replace(null,!0)&&(s||(s={}),s[n]=null):void 0!==(a=r.replace(null,!0))&&(s||(s={}),s[n]=null));for(n in e)r=this.$(n),o=e[n],r.leaf?r.replace(o,!0)&&(s||(s={}),s[n]=o):void 0!==(a=r.replace(o,!0))&&(s||(s={}),s[n]=a)}s&&this.notifyListeners(s,t)}return s},n.prototype.undeleteParents=function(){for(var e=this.parentNode;e&&e.deleted;)e.deleted=!1,e=e.parentNode},n.prototype.write=function(e,t,n){"function"==typeof t&&(n=t,t=!1);var i={path:this.path(),value:e};"function"==typeof n&&(i.func=n),this.update(e,t||!1);for(var o=this;o.parentNode;)o=o.parentNode;o.notifyWriteListeners(i)},n.prototype.bindWrite=function(e){this.getWriteListeners().push(e)},n.prototype.getValueListeners=function(){return this.listeners_value||(this.listeners_value=[]),this.listeners_value},n.prototype.getWriteListeners=function(){return this.listeners_write||(this.listeners_write=[]),this.listeners_write},n.prototype.getKeysListeners=function(){return this.listeners_keys||(this.listeners_keys=[]),this.listeners_keys},n.prototype.bindValue=function(e){this.getValueListeners().push(e);try{e.call(this,this.getValue())}catch(e){}},n.prototype.bindKeys=function(e){if(!this.leaf){this.getKeysListeners().push(e);try{e.call(this,this.getKeys(),[])}catch(e){}}},n.prototype.unbindValue=function(e){for(var t=this.getValueListeners(),n=0;n<t.length;n++)if(t[n]==e)return void t.splice(n,1)},n.prototype.unbindKeys=function(e){if(!this.leaf)for(var t=this.getKeysListeners(),n=0;n<t.length;n++)if(t[n]==e)return void t.splice(n,1)},n.prototype.on=function(e,t){switch(e){case"value":this.bindValue(t);break;case"keys":this.bindKeys(t)}},n.prototype.un=function(e,t){switch(e){case"value":this.unbindValue(t);break;case"keys":this.unbindKeys(t)}},n.prototype.notifyListeners=function(e,t){var n,o,r,s;if(!this.leaf)if(e)for(n in e)null!=e[n]?i(this.keys,n)||(this.keys[n]=1,o||(o=[]),o.push(n)):i(this.keys,n)&&(delete this.keys[n],r||(r=[]),r.push(n));else for(n in this.keys)delete this.keys[n],r||(r=[]),r.push(n);if(this.listeners_value)for(var a=0,c=(s=this.getValueListeners().concat()).length;a<c;a++)try{s[a](e)}catch(e){}if(!this.leaf){if(this.listeners_keys&&(o||r))for(a=0,c=(s=this.getKeysListeners().concat()).length;a<c;a++)try{s[a](o||[],r||[])}catch(e){}if(!t&&this.parentNode){var u={};u[this.name]=e,this.parentNode.notifyListeners(u,t)}}},n.prototype.notifyWriteListeners=function(e){if(this.listeners_write)for(var t=this.getWriteListeners().concat(),n=0;n<t.length;n++)try{t[n].call(this,e)}catch(e){}},n.prototype.getValue=function(e){if(e)return this.descend(e).getValue();if(this.leaf)return this.value;if(this.deleted)return null;var t,n,i={};for(var o in this.childNodes)null!=(n=this.childNodes[o].getValue())&&(i[o]=n,t=!0);return t?i:null},n.prototype.hasKey=function(e){return i(this.keys,e)},n.prototype.getKeys=function(){if(this.leaf)return null;var e=[];for(var t in this.keys)e.push(t);return e},n.prototype.gc=function(){if(this.leaf)throw new TypeError("Leaf nodes cannot be collected");var e=!0;for(var t in this.childNodes){var n=this.childNodes[t];e=n.leaf?!(n.listeners_value&&n.listeners_value.length)&&null==n.value&&(delete this.keys[t],delete this.childNodes[t])&&e:n.gc()&&(delete this.keys[t],delete this.childNodes[t])&&e}return e&&this.deleted&&!(this.listeners_keys&&this.listeners_keys.length)&&!(this.listeners_value&&this.listeners_value.length)},n.DataNode=n,e.exports=n},function(e,t){var n=function(e,t){return e===t||e&&t&&"object"==typeof e&&"object"==typeof t&&i(e,t)},i=function(e,t){var i;for(i in e)if(!n(e[i],t[i]))return!1;for(i in t)if(!n(e[i],t[i]))return!1;return!0},o=function(e){if("object"!=typeof e||!e)return e;var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=o(e[n]));return t},r={equal:n,clone:o,extend:function(e){if(e)for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t];if(i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}};e.exports=r},function(e,t,n){function i(e,t,n,i){switch(x=t,A=n,R=i,ie.init(A,R),function(){p("connection_update","tmp.friendly_connection_status$string",we),p("account_status","livechat.account.status$string",_(ye)),p("visitor_update","livechat.profile",(e=["email$string","phone$string","display_name$string"],t=o,function(n){return e.some(function(e){return n&&e in n})?[t()]:[null]})),p("department_update","livechat.departments",w(["name$string","status$string"],s)),p("agent_update","livechat.agents",w(["avatar_path$string","display_name$string","title$string"],l)),p("chat","livechat.channel.log",v(Le)),p("chat","livechat.agents",v(Te)),p("chat","livechat.triggers.agents",v(Oe)),p("chat","livechat.channel.queue_position$int",g),p("history","livechat.history.log",v(Le)),p("chat","livechat.channel.last_read",v(xe));var e,t}(),C=function(e){(e.path?R.descend(e.path):R).update(e.update)},x.on("message",C),S=e.suppress_console_error||!1,te.init(e.activity_window),te.DOM.getVariable("account_status")){case"invalid_account_key":B.warnBadEmbed();case"banned":return}x.init({root:A,overrideProxy:e.override_proxy,isCookieDenied:function(){return!1},source:ce,lastHost:te.DOM.getVariable("web_sdk_last_host"),source_ver:N.release_tag,activity_window:e.activity_window,gd_compatible:1}),A.$("connection").$("server$string").bindValue(function(e){e&&te.DOM.saveVariable("web_sdk_last_host",e)}),R.$("livechat").$("account").$("status$string").bindValue(function(e){e&&te.DOM.saveVariable("account_status",e)}),Q.init(A,x),ne.init(A,e.activity_window),se=!0}function o(){return $e(R.$("livechat").$("profile").getValue())}function r(e){var t=le.type("number"),n=R.$("livechat");if(!E([t],[e],"getDepartment"))return n.$("account").$("departments_migrated$bool").getValue()&&n.$("dg_mappings").hasKey(e)&&console.warn("legacy department id is deprecated, use group id %s instead",n.$("dg_mappings").$(e).$("group_id$int").getValue()),s(e)}function s(e){var t=R.$("livechat"),n=t.$("departments").$(e).getValue();if(t.$("account").$("departments_migrated$bool").getValue()){if(n&&t.$("dg_mappings").hasKey(e)){var i=t.$("dg_mappings").$(e).$("group_id$int").getValue();return Ee(n,i)}!n&&t.$("groups").hasKey(e)&&(n=t.$("groups").$(e).getValue())}return n?Ee(n,e):void 0}function a(e,t,n,i){if(!E([le.type("string").regex(he).chain(me),pe],[t,i],n)){i=i||ue;var o={};o[e]=t.trim(),A.$("livechat").$("channel").$("tags").write(o,O(i))}}function c(e,t,n,i){if(!E([le.each(le.type("string").regex(he).chain(me)).minLength(1),pe],[t,i],n)){i=i||ue;for(var o=0,r=t.length;o<r;o++)t[o]=t[o].trim();var s={};s[e]=t.join(","),A.$("livechat").$("channel").$("tags").write(s,O(i))}}function u(){return R.$("livechat").$("channel").$("chatting$bool").getValue()||!1}function l(e){return ke(R.$("livechat").$("agents").$(e).getValue(),e)}function d(e){return 0===e.indexOf("visitor:")?"visitor":e}function h(e){if(!e.type$string)return null;if(!e.nick$string)return null;var t={nick:d(e.nick$string),type:e.type$string},n=e.msg$string;switch(e.first$bool&&(t.first=e.first$bool),e.type$string){case"chat.msg":if("attachment"in e){if(!0===e.unverified$bool)return null;var i,o=e.attachment,r={mime_type:o.mime_type$string,name:o.name$string,size:o.size$int,url:o.url$string};return"metadata"in o&&(i=o.metadata,r.metadata={width:i.width$int,height:i.height$int}),"deleted$bool"in o&&(r.deleted=o.deleted$bool),q.extend(t,{type:"chat.file",display_name:e.display_name$string,attachment:r})}if("structured_msg"in e){var s=function e(t){if(!t||"object"!=typeof t)return t;var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=b(i),r=e(t[i]);n[o]=r}return n}(e.structured_msg);!function e(t,n){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(-1!==n.indexOf(i)&&(t[i]=y(t[i],function(e){return e})),"object"==typeof t[i]&&e(t[i],n))}(s,["items","buttons","quick_replies"]);var a=X.validate(s);a?$(a,'Unsupported structured message in "chat.msg" event'):t.structured_msg=s}return q.extend(t,{display_name:e.display_name$string,msg:n,options:e.options$string?e.options$string.split("/"):[]});case"chat.rating":return q.extend(t,{display_name:e.display_name$string,new_rating:e.new_rating$string,rating:e.rating$string});case"chat.comment":return q.extend(t,{display_name:e.display_name$string,comment:e.comment$string,new_comment:e.new_comment$string});case"chat.memberleave":return q.extend(t,{display_name:e.display_name$string});case"chat.memberjoin":case"chat.request.rating":return q.extend(t,{display_name:e.display_name$string});case"chat.event":var c;return"agent:system"===e.nick$string&&(c=/Please wait while our agents attend to you. There are currently (\d+) visitor\(s\) waiting to be served\./.exec(n))?{type:"chat.wait_queue",nick:"system.queue",wait_queue:parseInt(c[1],10)}:null;case"chat.join":var u=e.history;if(u&&u[0]){var l=q.extend({},u[0]),f=l.timestamp$int;return l.type$string=l.__type$string,l.display_name$string=l.name$string,f*=1e3,l.timestamp$int=f,h(l)}return null;case"chat.file.update":default:return null}}function f(e,t,n){return function(i,o){if(null===i)return{};for(var r={},s=0,a=e.length;s<a;s++){var c=e[s];c in i&&(r[b(c)]=i[c])}if(j(t)&&Object.keys(r).length&&(r[t]=o),U(n)){var u=n(i,o);return null===u?{}:q.extend(r,u)}return r}}function p(e,t,n){R.descend(t).bindValue(function(t){n(t).forEach(function(t){m(e,t)})})}function m(e,t){if(t){if(t instanceof Error){if(!t.message)return}else if("object"==typeof t&&!Object.keys(t).length)return;ae.fire("data",{type:e,detail:t})}}function g(e){return["number"!=typeof e?null:{type:"chat.queue_position",nick:"system.queue",queue_position:e}]}function _(e){return function(t){return void 0===t?[null]:[e[t]||null]}}function v(e){return function(t){return y(t,e)}}function y(e,t){var n=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.push(t(e[i],i));return n}function w(e,t){return function(n){var i=[];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var r=n[o];e.some(function(e){return r&&e in r})&&i.push(t(o))}return i}}function b(e){return e.split("$")[0]}function $(e,t,n){(e=new Error("Zendesk Chat Web SDK: Error: "+(t?t+": ":"")+e.message)).context=t,e.extra=n,S||window.console&&window.console.error&&console.error(e.message),m("error",e)}function E(e,t,n){for(var i=0;i<e.length;i++){var o=(0,e[i])(t[i]);if(o)return $(o,n),!0}return!1}function k(e){if("[object File]"!==Object.prototype.toString.call(e))return new Error("Expect a File object")}function T(e){if(!r(e))return new Error("Expect a valid department id")}function O(e){return function(t){var n=t.raw,i="ok"===n.__status?null:new window.Error("Failed");for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&0===o.indexOf("__")&&delete n[o];e(i,n)}}function L(e){if(e.length<=1)return e;var t=[];return e.forEach(function(e){t[e.start]=void 0!==t[e.start]?t[e.start]+1:1,t[e.end]=void 0!==t[e.end]?t[e.end]-1:-1}),function(e){var t,n=[],i=0;return e.forEach(function(e,o){e>0&&!t&&(t=o),e&&0===(i+=e)&&(n.push({start:t,end:o}),t=void 0)}),n}(t)}var x,A,R,I,C,S,D=n(2),N=n(4),M=n(0),P=n(22),V=n(1),j=n(12),U=n(5),q=n(48),z=n(47),K=n(21),F=n(20),W=n(3),H=n(45),B=n(6),G=n(15),Y=n(41),X=n(40),Z=n(39),Q=n(29),J=n(26),ee=n(13),te=n(14),ne=n(25),ie=n(24),oe={init:function(e){if(I&&ae.un("data",I),I=function(e){re.fire(e.type,e.detail)},ae.on("data",I),se)$(new Error("Zendesk Chat Web SDK has already been initialized. Please ensure that zChat.init() is only called once in your code"),"init");else if(D.isIE<=10)$(new Error("The current browser you are on is not supported by the Web SDK. Please refer to the documentation to learn about the system requirements for Zendesk Chat."),"init");else if(!E([le.obj({account_key:le.type("string").ok(),suppress_console_error:le.type("boolean"),override_auth_server_host:le.type("string").ok(),override_proxy:le.type("string").ok(),authentication:le.obj({jwt_fn:le.type("function").ok()},{requiredKeys:["jwt_fn"]}),activity_window:le.type("object").chain(ge),popout:le.type("boolean")},{requiredKeys:["account_key"]})],[e],"init")){var t=new z("root"),n=new z("root"),o={livechat:{settings:q.clone(J.livechat.settings)}};t.update(o),n.update(o),H()&&t.$("livechat").$("ui").$("mobile$bool").update(!0),W.ACCOUNT_KEY=e.account_key,e.authentication?(ee.setOverrideHost(e.override_auth_server_host),ee.setSiteJWTFunc(e.authentication.jwt_fn),ee.setDataNode(t),ee.authenticate(function(o){o?$(new Error("Failed to verify token: "+o.reason+(o.details?": "+o.details:"")),"init",{reason:o.reason,details:o.details}):i(e,Z,t,n)})):i(e,Z,t,n)}},reconnect:function(){"invalid_account_key"!==te.DOM.getVariable("account_status")?"closed"===re.getConnectionStatus()?ve():$(new Error("Call has been ignored due to invalid connection status"),"reconnect"):B.warnBadEmbed()},getFirehose:function(){return ae},setVisitorInfo:function(e,t){if(!E([le.obj({display_name:le.any([le.equal(""),le.type("string").regex(he).maxLength(255)]),email:le.any([le.equal(""),le.type("string").regex(K.email)]),phone:fe}),pe],[e,t],"setVisitorInfo")){var n={};t=t||ue,"display_name"in e&&(n.display_name$string=e.display_name),"email"in e&&(n.email$string=e.email),"phone"in e&&(n.phone$string=e.phone),A.$("livechat").$("profile").write(n,O(t))}},getVisitorInfo:o,setVisitorDefaultDepartment:function(e,t){E([le.type("number").chain(T),pe],[e,t],"setVisitorDefaultDepartment")||(t=t||ue,A.$("livechat").$("profile").write({department_id$int:e},O(t)))},getVisitorDefaultDepartment:function(){var e=R.$("livechat").$("profile").$("department_id$int").getValue();return P(e)?e:void 0},getAllDepartments:function(){var e=R.$("livechat");return y(e.$("account").$("departments_migrated$bool").getValue()?e.$("groups").getValue():e.$("departments").getValue(),Ee)},getDepartment:r,clearVisitorDefaultDepartment:function(e){E([pe],[e],"clearVisitorDefaultDepartment")||(e=e||ue,A.$("livechat").$("profile").write({department_id$int:null},O(e)))},addTag:function(e,t){a("added$string",e,"addTag",t)},removeTag:function(e,t){a("removed$string",e,"removeTag",t)},addTags:function(e,t){c("added$string",e,"addTags",t)},removeTags:function(e,t){c("removed$string",e,"removeTags",t)},sendChatMsg:function(e,t){E([le.type("string").regex(he),pe],[e,t],"sendChatMsg")||(t=t||ue,Q.sendChatMsg({msg:e.trim()},null,O(t)))},sendFile:function(e,t){E([le.chain(k),pe],[e,t],"sendFile")||function(e,t){t=t||ue,Z.reconnectIfServerRetired(function(){Q.sendFileWithCallback(e,t)})}(e,t)},sendVisitorPath:function(e,t){E([le.obj({title:le.type("string").regex(he),url:le.type("string").regex(de)},{requiredKeys:["title","url"]}),pe],[e,t],"sendVisitorPath")||(t=t||ue,A.$("livechat").$("session").$("page_path").write({url$string:e.url,title$string:e.title},O(t)))},sendChatComment:function(e,t){E([le.type("string"),pe],[e,t],"sendChatComment")||(t=t||ue,A.$("livechat").$("channel").write({comment$string:e},O(t)))},sendChatRating:function(e,t){E([le.any([le.equal(null),le.equal("good"),le.equal("bad")]),pe],[e,t],"sendChatRating")||(t=t||ue,A.$("livechat").$("channel").write({rating$string:e},O(t)))},getChatInfo:function(){var e=R.$("livechat").$("channel").$("rating$string").getValue(),t=R.$("livechat").$("channel").$("comment$string").getValue(),n={};return V(e)||(n.rating=e),V(t)||(n.comment=t),n},endChat:function(e,t){var n=le.obj({clear_dept_id_on_chat_ended:le.type("boolean")}),i=A.$("livechat").$("channel");"function"==typeof e?(t=e,e={}):void 0===e&&(e={}),E([n,pe],[e,t],"endChat")||(t=t||ue,i.write({chatting$bool:!1},O(t)),e.clear_dept_id_on_chat_ended&&Q.clearChatDepartmentID())},isChatting:u,getServingAgentsInfo:function(){return y(R.$("livechat").$("agents").getValue(),ke)},sendOfflineMsg:function(e,t){if(!E([le.obj({name:le.type("string").regex(he).maxLength(255),email:le.type("string").regex(K.email),message:le.type("string").regex(he),phone:fe},{requiredKeys:["name","email","message"]}),pe],[e,t],"sendOfflineMsg")){t=t||ue;var n={name:{name$string:"name",value$string:e.name},email:{name$string:"email",value$string:e.email},message:{name$string:"message",value$string:e.message}};"phone"in e&&(n.phone={name$string:"phone",value$string:e.phone}),"department"in e&&(n.department={name$string:"department_id",value$string:e.department}),A.$("livechat").$("settings").$("forms").$("offline_form").$("form_submitted").write(n,O(t))}},sendTyping:F.debounceExceptFirst(function(e){var t=A.$("livechat").$("channel").$("typing"),n=t.$("typing$bool").getValue(),i=le.type("boolean");n!==e&&(E([i],[e],"sendTyping")||t.write({typing$bool:e}))},300),sendEmailTranscript:function(e,t){var n=le.type("string").regex(K.email),i=!!R.$("livechat").$("channel").$("log").getKeys().length;E([n,pe],[e,t],"sendEmailTranscript")||(t=t||ue,R.$("livechat").$("channel").$("chatting$bool").getValue()?A.$("livechat").$("channel").write({email_transcript$string:e},O(t)):ee.isAuthenticated()||i?A.$("livechat").$("channel").write({email_last_transcript$string:e},O(t)):$(new Error("There were no past chat to send a transcript of"),"sendEmailTranscript"))},getChatLog:function(){var e,t,n,i=["type$string","timestamp$int"],o=R.$("livechat").$("channel").$("log").getValue(),r=[];for(var s in o)if(Object.prototype.hasOwnProperty.call(o,s)){if(o[s].type$string)e=o[s];else if("chat.msg"===(e=A.$("livechat").$("channel").$("log").$(s).getValue()).type$string&&(!0===e.unverified$bool||!0===e.failed$bool))continue;var a=h(e);if(null===a)continue;for(var c=0;c<i.length;c++)(n=b(t=i[c]))in a||(a[n]=e[t]);r.push(a)}return r},getConnectionStatus:function(){if(!R)return"closed";var e=R.$("tmp").$("friendly_connection_status$string").getValue();return we(e)[0]},getAccountStatus:function(){var e=R.$("livechat").$("account").$("status$string").getValue();return be(e)[0]},getOperatingHours:function(){var e=R.$("livechat"),t=e.$("settings"),n=t.$("operating_hours");if(t.hasKey("operating_hours")){var i=n.$("type$string").getValue(),o={enabled:n.$("enabled$bool").getValue(),type:i,timezone:t.$("timezone$string").getValue()||"UTC"};if("account"==i)o.account_schedule=function(e){for(var t,n,i={},o=0;o<7;o++){var r=e[o]||{};if(r.enabled$bool){for(var s in t=[],n=r.periods)Object.prototype.hasOwnProperty.call(n,s)&&t.push({start:n[s].start$int,end:n[s].end$int});i[o]=L(t)}else i[o]=[]}return i}(n.$("schedule").getValue()||{});else if("department"==i){var r=e.$("dg_mappings").getValue(),s=function(e,t){var n,i={},o=function(e){var t,n,i={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(n=e[o],Object.prototype.hasOwnProperty.call(n,"deleted_ts$int"))continue;if(!n.departments)continue;if(!n.enabled$bool)continue;t={};for(var r=0;r<7;r++){var s=n[r],a=[];if(s.enabled$bool&&s.periods){var c=s.periods;for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&a.push({start:c[u].start$int,end:c[u].end$int});a.length&&(t[r]=a)}}Object.keys(t).length&&(i[o]=t)}return i}(e),r=function(e,t){var n,i={};for(var o in t.forEach(function(e){i[e]=[]}),e)if(Object.prototype.hasOwnProperty.call(e,o))for(var r in(n=e[o]).departments)if(Object.prototype.hasOwnProperty.call(n.departments,r)){if(!n.departments[r])continue;var s=b(r);if(!i[s])continue;i[s].push(o)}return i}(e,t);return t.forEach(function(e){var t=r[e];for(i[e]={},n=0;n<7;n++)i[e][n]=[];for(t.forEach(function(t){for(var n in o[t])Object.prototype.hasOwnProperty.call(o[t],n)&&Array.prototype.push.apply(i[e][n],o[t][n])}),n=0;n<7;n++){var s=i[e][n];s.length>1&&(i[e][n]=L(s))}}),i}(n.$("schedules").getValue(),e.$("departments").getKeys());e.$("account").$("departments_migrated$bool").getValue()&&r&&(s=Object.keys(s).reduce(function(e,t){return t in r?e[r[t].group_id$int]=s[t]:e[t]=s[t],e},{})),o.department_schedule=s}return o}},getQueuePosition:function(){return R.$("livechat").$("channel").$("queue_position$int").getValue()||0},fetchChatHistory:function(e){if(!E([pe],[e],"fetchChatHistory"))if(ee.isAuthenticated()){var t=R.$("livechat").$("history"),n=A.$("livechat").$("history"),i=n.$("in_progress$bool").getValue(),o=t.$("has_more$bool").getValue(),r=t.$("cursor$string").getValue();i?$(new Error("Previous fetching of history is still in progress"),"fetchChatHistory"):!1!==o?(e=e||ue,n.$("in_progress$bool").update(!0),n.write({cursor$string:r||""},O(e))):$(new Error("No more history to load"),"fetchChatHistory")}else $(new Error("This API is not available for unauthenticated visitors"),"fetchChatHistory")},markAsRead:F.throttle(function(){u()&&A.$("livechat").$("ui").$("chat").write({read_ts$int:+new Date})},2e3),logout:function(e){E([pe],[e],"logout")||(ee.isAuthenticated()?function(e){x.destroy(),ae.un("data",I),ie.destroy(),x.un("message",C),I=null,C=null,S=void 0,ee.clearIdentity(),te.clearIdentity(),se=!1,e&&setTimeout(function(){e(null)})}(e):$(new Error("This API is only applicable for authenticated visitors"),"logout"))},EMAIL_REGEX:K.email},re=M.extend(oe),se=!1,ae=M.extend({}),ce="web_sdk",ue=function(){},le=G,de=/^(https?|ftps?):\/\//i,he=/\S/,fe=le.any([le.equal(""),le.type("string").regex(/[0-9]+/).maxLength(25)]),pe=le.any([le.equal(void 0),le.type("function")]),me=le.predicate(function(e){return-1===e.indexOf(",")},"not contain any comma character"),ge=le.predicate(function(e){return"object"==typeof e.document&&!!e.document&&"object"==typeof e.navigator&&!!e.navigator&&"object"==typeof e.location&&!!e.location},"be a valid window object"),_e={interval:6e5,limit:10,callback:function(){$(new Error("Call has been ratelimted"),"reconnect")}},ve=Y.rateLimit(function(){x.reconnect()},_e),ye={online:"online",offline:"offline",away:"away",invalid_account_key:null,banned:null},we=_({connected:"connected",connecting:"connecting",closed:"closed"}),be=_(ye),$e=f(["email$string","phone$string","display_name$string"]),Ee=f(["name$string","status$string"],"id",function(e,t){return{id:parseInt(t,10)}}),ke=f(["avatar_path$string","display_name$string","title$string"],"nick"),Te=f(["typing$bool"],"nick",function(e){return Object.prototype.hasOwnProperty.call(e,"typing$bool")?{type:"typing"}:null}),Oe=f(["typing$bool"],"display_name",function(e){return Object.prototype.hasOwnProperty.call(e,"typing$bool")?{type:"typing",nick:"agent:trigger"}:null}),Le=f(["timestamp$int"],null,h),xe=f(["timestamp$int"],"nick",function(e){return Object.prototype.hasOwnProperty.call(e,"timestamp$int")?{type:"last_read"}:null}),Ae=(f(["banner","behavior","branding","bubble","chat_button","chat_window","concierge","file_sending","forms","greetings","language","login","rating","sound","theme","timezone$string"]),["on","un","fire","unextendEvents","init","getFirehose","getConnectionStatus"]);for(var Re in re)Object.prototype.hasOwnProperty.call(re,Re)&&-1===Ae.indexOf(Re)&&U(re[Re])&&(re[Re]=function(e,t){return function(){if(!1!==se)return t.apply(null,arguments);$(new Error("Web SDK is not initialized yet. Please ensure that you call zChat.init() and wait for the connection to be established before calling this method"),e)}}(Re,re[Re]));e.exports=re},function(e,t,n){var i=n(49);e.exports=i}])});